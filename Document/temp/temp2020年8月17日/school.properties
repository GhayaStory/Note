#------\u5B66\u6821\u9875\u9762\u914D\u7F6E-------------------------
# \u6DFB\u52A0 \u5B66\u6821 \u914D\u7F6E
sql.school.addConfigStatus = insert into TConfigStatus(configStatus,schoolId,type,createdTime,createdBy,updatedTime,updatedBy) VALUES(?,?,?,?,?,?,?)
#\u5F97\u5230\u5B66\u6821\u914D\u7F6E
sql.school.getConfigStatus = SELECT id,configStatus,schoolId,type,createdTime,createdBy,updatedTime,updatedBy FROM TConfigStatus where schoolId=?
# \u901A\u8FC7\u7C7B\u578B\uFF0C\u5B66\u6821  \u66F4\u65B0\u5B66\u6821 \u914D\u7F6E\u72B6\u6001
sql.school.updateConfigStatusByType  =  update TConfigStatus set configStatus=? where schoolId=? and type=?

#---------------------------\u5E74\u7EA7
#\u5F97\u5230\u5E74\u7EA7\u4FE1\u606F
sql.school.getGrade = SELECT id,name,typeName,type,schoolName,schoolId FROM TGrade where schoolId=? order by sort

# ----------------------------------\u5B66\u671F
#\u5F97\u5230\u5B66\u671F
sql.school.getTermBySchoolId = SELECT id,name,startDate,endDate,value,flag,schoolYearId,schoolYearName FROM TTerm where schoolId=?

#\u6839\u636E\u5B66\u6821id\u5F97\u5230\u73ED\u7EA7 20190829 by Xuzy
sql.school.queryClassBySchoolId=SELECT CONCAT(gradeName,NAME) gradeClassName,id, NAME, schoolId, schoolName, STATUS, gradeId, gradeName, classManagerId, classManagerName, totalPeople, sort \
  FROM TClass WHERE schoolId =? ORDER BY sort


#-------by chl-----
#\u6839\u636E\u5B66\u6821ID\uFF0C\u5B66\u5E74ID\u83B7\u5F97\u5B66\u671F
sql.school.getTermListBySchoolYearId = SELECT id, name, startDate, endDate, value, schoolYearId, schoolYearName,flag FROM TTerm WHERE schoolId =? AND schoolYearId =? 
#\u6839\u636E\u5B66\u6821ID\u67E5\u8BE2\u5B66\u5E74\u4FE1\u606F
sql.school.querySchoolYearList = SELECT id, name, startDate, endDate, flag, statusId, sort FROM TSchoolYear
#\u67E5\u8BE2\u4EFB\u8BFE\u8001\u5E08\u6240\u6559\u73ED\u7EA7
sql.school.queryClassList = SELECT a.subjectId,a.subjectName,a.teacherId,a.teacherName,b.gradeId,b.gradeName,b.classId,b.className \
  FROM TSubjectTeacher a LEFT JOIN  TSubjectTeacherClass b ON a.id = b.subjectTeacherId where a.teacherId = ? GROUP BY gradeId,classId
#\u67E5\u8BE2\u5E74\u6BB5\u957F\u672C\u5E74\u6BB5\u73ED\u7EA7
sql.school.queryClassListByGradeId = SELECT name,id,gradeName,gradeId from TClass where gradeId = ? and schoolId = ?
#\u67E5\u8BE2\u5E74\u7EA7
sql.school.queryGradeList = select id,name from TGrade where schoolId = ?
#\u67E5\u8BE2\u4EFB\u8BFE\u8001\u5E08\u6240\u6559\u79D1\u76EE
sql.school.querySingleTeacherExamTypeList = SELECT a.isSysSubject,a.subjectId,a.subjectName,a.teacherId,a.teacherName,b.gradeId,b.gradeName,b.classId,b.className \
  FROM TSubjectTeacher a LEFT JOIN  TSubjectTeacherClass b ON a.id = b.subjectTeacherId where a.teacherId = ? GROUP BY subjectId
#\u67E5\u8BE2\u5B66\u6821\u8BFE\u7A0B\u6570\u636E
sql.school.getSchoolSubjectData = SELECT name,subjectTime,schoolName FROM TSchoolSubject where id = ?
#\u67E5\u8BE2\u5B66\u6821\u8BFE\u7A0B\u8001\u5E08\u540D\u5B57\u6570\u636E
sql.school.getSubjectTeacherName = SELECT a.subjectId,a.subjectName,a.teacherName,a.schoolName,b.gradeName,b.className from TSubjectTeacher a LEFT JOIN TSubjectTeacherClass b on a.id = b.subjectTeacherId where \
   b.classId=? and a.isSysSubject=0 and a.subjectId=?
#\u83B7\u5F97\u5F53\u524D\u5B66\u5E74
sql.school.queryCurrentYearsSchoolYear = SELECT id, name, startDate, endDate, flag, statusId, sort FROM TSchoolYear where flag = 1;

#\u67E5\u8BE2\u73ED\u4E3B\u4EFB\u7BA1\u7406\u7684\u5E74\u7EA7\u73ED\u7EA7
sql.school.queryGradeAndClassByManager = select gradeId,gradeName,id as classId,name as className from TClass where classManagerId=? order by gradeId
#\u67E5\u8BE2\u4EFB\u8BFE\u8001\u5E08\u4EFB\u8BFE\u5E74\u7EA7\u73ED\u7EA7
sql.school.queryGradeAndClassBySubjectTeacher = select t1.gradeId,t1.gradeName,t1.classId,t1.className from TSubjectTeacherClass t1 join TSubjectTeacher t2 on t1.subjectTeacherId=t2.id where t2.teacherId=? order by t1.gradeId
#\u67E5\u8BE2\u5E74\u6BB5\u957F\u7BA1\u7406\u7684\u5E74\u7EA7\u73ED\u7EA7
sql.school.getGradeAndClassByGradeManager = select t2.gradeId,t2.gradeName,t2.id as classId,t2.name as className from TGrade t1 join TClass t2 on t1.id=t2.gradeId where t1.managerId=? order by t2.gradeId
#\u67E5\u8BE2\u5B66\u6821\u6240\u6709\u7684\u5E74\u7EA7\u73ED\u7EA7
sql.school.queryGradeAndClassBySchoolId = select gradeId,gradeName,id as classId,name as className from TClass where schoolId=?
#\u6839\u636E\u5B66\u6821ID\uFF0C\u5E74\u7EA7ID\u83B7\u5F97\u73ED\u7EA7
sql.school.getClassListByGradeId = select id,name,schoolName,schoolId,gradeId,gradeName,classManagerId,classManagerName,totalPeople,status,\
creator,sort from TClass where status=1 and schoolId = ? and gradeId = ? order by sort

#\u6839\u636E\u5B66\u6821ID,\u83B7\u53D6\u5B66\u6821\u4FE1\u606F
sql.school.getSchoolMessageById = select id,name,type,managerName,managerPhone,managerEmail,managerQQ,managerWechat,officialSeal,creator,creatorName,creationTime,\
  modifier,modifierName,modifyTime,address,status,motto,channelID,province,city,area,areaName,schoolDistrict,logoId,logoAddress,iconId,iconAddress \
  from TSchool where status=1 and id = ?

#\u6839\u636E\u5B66\u6821ID,\u83B7\u53D6\u5B66\u6821\u5168\u90E8\u4FE1\u606F
sql.school.getSchoolAllMessageById = select id,name,type,typeName,managerName,managerPhone,managerEmail,managerQQ,managerWechat,officialSeal,creator,creatorName,\
    creationTime,modifier,modifierName,modifyTime,address,status,motto,channelID,province,city,area,provinceName,cityName,areaName,schoolDistrict,\
    logoId,logoAddress,iconId,iconAddress from TSchool where status=1 and id = ?
#\u6839\u636E\u5B66\u6821ID\uFF0C\u5E74\u7EA7ID,\u73ED\u7EA7\u540D\u79F0\u83B7\u5F97\u73ED\u7EA7
sql.school.getClassId = select id from TClass where schoolId = ? and gradeId = ? and name = ?
#\u6839\u636E\u5B66\u6821ID\uFF0C\u5E74\u7EA7ID,\u5E74\u7EA7\u540D\u79F0\u83B7\u5F97\u5E74\u7EA7id
sql.school.getGradeIdByName = select id from TGrade where schoolId = ? and name = ?
#\u67E5\u8BE2\u73ED\u7EA7ID\u548C\u5E74\u7EA7ID
sql.school.getClassIdAndGradeId = select id,gradeId from TClass where schoolId = ? and gradeName = ? and name = ?
#\u66F4\u65B0\u5B66\u6821\u4FE1\u606F
sql.school.updateSchool=UPDATE TSchool SET managerEmail=?,managerQQ=?,motto=?,officialSeal=?,logoAddress=?,logoId=?,modifier=?,modifierName=?,modifyTime=? WHERE id=? 
#\u67E5\u8BE2\u5B66\u6821\u5E74\u7EA7
sql.school.getGradeName = select name FROM TGrade where schoolId = ? order by id
#\u6839\u636E\u5B66\u6821\u540D\u79F0\u83B7\u5F97\u5B66\u6821id
sql.school.getSchoolIdByName = select id from TSchool where name = ?
#\u67E5\u8BE2\u5B66\u6821\u57FA\u672C\u4FE1\u606F\u5217\u8868
sql.school.queryBaseSchoolList = select id,name,type,logoId,logoAddress,iconId,iconAddress from TSchool where status=1 

#----------- \u7EC4\u7EC7 -------------------------
#\u901A\u8FC7\u5B66\u6821ID\u83B7\u53D6\u7EC4\u7EC7\u5217\u8868
sql.school.organization.getOrganizationListBySchoolId=SELECT t1.id,t1.name,t1.pid,t1.pname,t1.ptree,t1.schoolID,t1.schoolName FROM TOrganization t1 where t1.schoolID = ?
#\u65B0\u589E\u7EC4\u7EC7
sql.school.organization.addOrganization=INSERT INTO `TOrganization`(name,pid,pname,ptree,schoolID,schoolName,creator,creationTime,creatorName) VALUE (?, ?, ?, ?, ?, ?, ?, now(), ?)
#\u66F4\u65B0\u7EC4\u7EC7
sql.school.organization.updateOrganization=UPDATE TOrganization set name = ?,pid=?,pname=?,ptree=?,modifier=?,modifierName=?,modifyTime=now() WHERE id = ?
#\u5220\u9664\u7EC4\u7EC7
sql.school.organization.deleteOrganization=DELETE FROM TOrganization WHERE id = ?

#----------- \u4EBA\u5458 -------------------------
#\u901A\u8FC7\u8EAB\u4EFD\u8BC1\u67E5\u8BE2\u4EBA\u5458
sql.school.person.queryPersonByIdCard=SELECT id,idCard,realName FROM TPerson WHERE idCard = ?
#\u65B0\u589E\u4EBA\u5458
sql.school.person.addPerson=INSERT INTO TPerson(idCard,realName,creator,creationTime) VALUE (?,?,?,now())

#----------- \u6559\u5E08 -------------------------
#\u901A\u8FC7\u5B66\u6821\u67E5\u627E\u6559\u5E08(\u57FA\u672C\u4FE1\u606F)
sql.school.teacher.queryBaseTeacherInfoBySchoolId=SELECT t2.id as personId,t1.id,t1.schoolID,t1.organizationID,t1.organizationName,t1.organizationTree,t1.realName,t1.initials,t1.pinyin,t1.staffNumber,t1.sex,t1.sexName FROM TTeacher t1 \
  LEFT JOIN TPerson t2 ON t1.idCard=t2.idCard left join TTeacherLogin t3 on t1.mobilephone = t3.userName and t1.schoolID = t3.schoolId where t1.schoolID=? and t3.status = 1
#\u901A\u8FC7\u5B66\u6821\u548C\u5173\u952E\u5B57\u67E5\u627E\u6559\u5E08(\u57FA\u672C\u4FE1\u606F)
sql.school.teacher.queryBaseTeacherInfoBySchoolIdAndKey=SELECT t2.id as personId,t1.id,t1.schoolID,t1.organizationID,t1.organizationName,t1.organizationTree,t1.realName,t1.initials,t1.pinyin,t1.staffNumber,t1.sex,t1.sexName FROM TTeacher t1 \
  LEFT JOIN TPerson t2 ON t1.idCard=t2.idCard left join TTeacherLogin t3 on t1.mobilephone = t3.userName and t1.schoolID = t3.schoolId where t1.schoolID=? and t3.status = 1 and ( UPPER(t1.initials) like UPPER(?) or UPPER(t1.pinyin) like UPPER(?) or UPPER(t1.realName) like UPPER(?)) 
#\u901A\u8FC7\u5B66\u6821\u67E5\u627E\u6559\u5E08
sql.school.teacher.queryTeacherBySchoolId = SELECT m.*,t2.id AS loginId,t2.status FROM(SELECT t1.id,t1.schoolID,t1.organizationID,t1.organizationName,t1.organizationTree,t1.realName,t1.initials,t1.pinyin,t1.mobilephone,t1.telephone,t1.email,t1.staffNumber,t1.idCard,t1.sex,t1.sexName,t1.workTime from TTeacher t1 WHERE t1.schoolID=? AND t1.organizationTree like ?) m \
                                LEFT JOIN TTeacherLogin t2 \
ON m.mobilephone = t2.userName 

#\u901A\u8FC7\u5B66\u6821\u548C\u5173\u952E\u5B57\u67E5\u627E\u6559\u5E08
sql.school.teacher.queryTeacherBySchoolIdAndKey = \
  SELECT t1.id,\
  t1.schoolID,\
  t1.schoolName,\
  t1.organizationID,\
  t1.organizationName,\
  t1.organizationTree,\
  t1.realName,\
  t1.initials,\
  t1.pinyin,\
  t1.mobilephone,\
  t1.telephone,\
  t1.email,\
  t1.staffNumber,\
  t1.idCard,\
  t1.sex,\
  t1.sexName,\
  t1.workTime \
  from TTeacher t1  \
  where \
  schoolID=? \
  and \
  ( \
  UPPER(initials) like UPPER(?) \
  or UPPER(pinyin) like UPPER(?) \
  or UPPER(realName) like UPPER(?) \
  or mobilephone like ? )


#\u901A\u8FC7\u5B66\u6821\u548C\u5173\u952E\u5B57\u67E5\u627E\u6559\u5E08
sql.school.teacher.queryTeacherBySchoolIdAndKey3 = \
  SELECT \
     t1.id, \
     t1.schoolID, \
     t1.schoolName, \
     t1.realName, \
     t1.initials, \
     t1.pinyin, \
     t1.mobilephone, \
     t1.telephone, \
     t1.email, \
     t1.staffNumber, \
     t1.idCard, \
     t1.sex, \
     t1.sexName, \
     t1.workTime, \
     t2.roleName, \
     t3.subjectName, \
     t4.gradeName, \
     t4.className \
  FROM TTeacher t1  \
  LEFT JOIN TTeacherRole t2 ON t1.id = t2.teacherID \
  LEFT JOIN school.TSubjectTeacher t3 ON t1.id = t3.teacherId \
  LEFT JOIN school.TSubjectTeacherClass t4 on t3.id = t4.subjectTeacherId \
  WHERE t1.schoolID = ? and t3.schoolId = ? and t4.schoolId = ?



#\u901A\u8FC7\u5B66\u6821\u67E5\u627E\u6559\u5E08
sql.school.teacher.queryTeacherListBySchoolId = \
  SELECT \
     t1.id, \
     t1.schoolID, \
     t1.schoolName, \
     t1.realName, \
     t1.initials, \
     t1.pinyin, \
     t1.mobilephone, \
     t1.telephone, \
     t1.email, \
     t1.staffNumber, \
     t1.idCard, \
     t1.sex, \
     t1.sexName, \
     t1.workTime, \
     t2.avatarAddress \
  FROM TTeacher t1 \
  left join TTeacherLogin t2 on t2.userName = t1.mobilephone \
  WHERE t1.schoolID = ? and t2.schoolId = ?


#\u901A\u8FC7\u5B66\u6821\u67E5\u627E\u6559\u5E08
sql.school.teacher.queryTeacherByTeacherId = \
  SELECT \
     t1.id, \
     t1.schoolID, \
     t1.schoolName, \
     t1.realName, \
     t1.mobilephone, \
     t1.telephone, \
     t1.staffNumber, \
     t1.idCard, \
     t1.sex, \
     t1.sexName, \
     t1.workTime, \
     t2.userName, \
     t2.avatarAddress \
  FROM person.TTeacher t1 \
  left join person.TTeacherLogin t2 on t2.userName = t1.mobilephone \
  WHERE t1.schoolID = ? and t2.schoolId = ? and t1.id = ?



#\u901A\u8FC7\u5B66\u6821\u548C\u5173\u952E\u5B57\u67E5\u627E\u6559\u5E08
sql.school.teacher.queryTeacherDetail = \
  SELECT \
     t1.id, \
     t1.sex, \
     t1.sexName, \
     t1.workTime, \
     t2.roleName, \
     t3.subjectName, \
     t4.gradeName, \
     t4.className \
  FROM person.TTeacher t1  \
  LEFT JOIN person.TTeacherRole t2 ON t1.id = t2.teacherID \
  LEFT JOIN school.TSubjectTeacher t3 ON t1.id = t3.teacherId \
  LEFT JOIN school.TSubjectTeacherClass t4 on t3.id = t4.subjectTeacherId \
  WHERE t1.schoolID = ? and t3.schoolId = ? and t4.schoolId = ? and t1.id = ?


sql.school.teacher.queryTeacherBySchoolId2 = SELECT m.*,t2.id AS loginId,t2.status FROM(SELECT t1.id,t1.schoolID,t1.organizationID,t1.organizationName,t1.organizationTree,t1.realName,t1.initials,t1.pinyin,t1.mobilephone,t1.telephone,t1.email,t1.staffNumber,t1.idCard,t1.sex,t1.sexName,t1.workTime from TTeacher t1 WHERE t1.schoolID=? AND t1.organizationTree like ?) m \
                                LEFT JOIN TTeacherLogin t2 \
ON m.mobilephone = t2.userName AND t2.teacherId=m.id AND t2.schoolId = ? \
   ORDER BY t2.status DESC

#\u901A\u8FC7\u5B66\u6821\u548C\u5173\u952E\u5B57\u67E5\u627E\u6559\u5E08
sql.school.teacher.queryTeacherBySchoolIdAndKey2 = \
  SELECT m.*,t2.id AS loginId,t2.status FROM (SELECT t1.id,\
  t1.schoolID,\
  t1.schoolName,\
  t1.organizationID,\
  t1.organizationName,\
  t1.organizationTree,\
  t1.realName,\
  t1.initials,\
  t1.pinyin,\
  t1.mobilephone,\
  t1.telephone,\
  t1.email,\
  t1.staffNumber,\
  t1.idCard,\
  t1.sex,\
  t1.sexName,\
  t1.workTime \
  from TTeacher t1  \
  WHERE  t1.schoolID=? \
  AND t1.organizationTree like ?\
  AND \
  ( \
  UPPER(t1.initials) like UPPER(?) \
  or UPPER(t1.pinyin) like UPPER(?) \
  or UPPER(t1.realName) like UPPER(?) \
  or t1.mobilephone like ? ) ) m \
LEFT JOIN TTeacherLogin t2 ON m.mobilephone = t2.userName AND t2.teacherId=m.id AND t2.schoolId = ?  ORDER BY t2.status DESC

#\u901A\u8FC7\u5B66\u6821\u548C\u5E74\u6BB5\u3001\u73ED\u7EA7\u67E5\u627E\u79D1\u76EE\u6559\u5E08
sql.school.teacher.querySubjectTeacherBySchoolIdAndClassIdAndGradeId = select a.schoolName,a.gradeName,a.className,b.subjectName,b.teacherName,c.mobilephone,c.initials,c.pinyin,c.staffNumber,d.IDPhotoAddress FROM  TSubjectTeacher b \
  LEFT JOIN  TSubjectTeacherClass a on a.subjectTeacherId=b.id and b.schoolId= a.schoolId LEFT JOIN person.TTeacher c on b.teacherId = c.id and c.schoolId = b.schoolId LEFT JOIN person.TTeacherLogin d on c.id = d.teacherId and c.schoolId= d.schoolId where a.schoolId=? and a.gradeId=? and a.classId=?

#\u901A\u8FC7\u5B66\u6821\u548C\u8EAB\u4EFD\u8BC1\u67E5\u8BE2\u6559\u5E08
sql.school.teacher.queryTeacherByIdCardAndSchoolId=SELECT t1.id,t1.schoolID,t1.schoolName,t1.organizationID,t1.organizationName,t1.organizationTree,t1.realName,t1.initials,t1.pinyin,t1.mobilephone,t1.telephone,t1.email,t1.staffNumber,t1.idCard,t1.sex,t1.sexName,t1.workTime FROM TTeacher t1 \
  WHERE t1.idCard = ? AND t1.schoolID = ?
#\u901A\u8FC7\u804C\u5DE5\u53F7\u3001\u59D3\u540D\u67E5\u8BE2\u6559\u5E08
sql.school.teacher.queryTeacherByStaffNumAndRealName=SELECT t1.id,t1.schoolID,t1.schoolName,t1.organizationID,t1.organizationName,t1.organizationTree,t1.realName,t1.initials,t1.pinyin,t1.mobilephone,t1.telephone,t1.email,t1.staffNumber,t1.idCard,t1.sex,t1.sexName,t1.workTime FROM TTeacher t1 \
  WHERE t1.schoolID = ? AND t1.staffNumber = ? AND t1.realName = ?
#\u65B0\u589E\u6559\u5E08\u8868
sql.school.teacher.addTeacher=INSERT INTO TTeacher(schoolID, schoolName,organizationID,organizationName,organizationTree,realName,initials,pinyin,mobilephone,telephone,email,staffNumber,idCard,sex,sexName,workTime,status,creator,creatorName,creationTime) VALUE (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,0,?,?,now())
#\u66F4\u65B0\u6559\u5E08\u8868
sql.school.teacher.updateTeacher=UPDATE TTeacher SET schoolID=?,schoolName=?,organizationID=?,organizationName=?,organizationTree=?,realName=?,initials=?,pinyin=?,mobilephone=?,telephone=?,email=?,staffNumber=?,idCard=?,sex=?,sexName=?,workTime=?,modifier=?,modifierName=?,modifyTime=now() WHERE  id=?
#\u66F4\u65B0\u6559\u5E08\u7EC4\u7EC7\u540D\u79F0
sql.school.teacher.updateTeacherOrganizationName=UPDATE TTeacher SET organizationName=?,organizationTree=?,modifier=?,modifierName=?,modifyTime=now() WHERE  schoolID=? AND organizationID=?
#\u901A\u8FC7\u5B66\u6821\u548C\u624B\u673A\u53F7\u7EDF\u8BA1\u6559\u5E08
sql.school.teacher.countTeacherBySchoolIdAndMobile=SELECT count(DISTINCT (idCard)) FROM TTeacher WHERE schoolID = ? AND mobilephone = ?
#\u901A\u8FC7\u5B66\u6821\u548C\u804C\u5DE5\u53F7\u7EDF\u8BA1\u6559\u5E08
sql.school.teacher.countTeacherBySchoolIdAndStaffNumber=SELECT count(id) FROM TTeacher WHERE schoolID = ? AND staffNumber = ?
#\u901A\u8FC7\u5B66\u6821\u548C\u804C\u5DE5\u53F7\u7EDF\u8BA1\u6559\u5E08(\u6392\u9664\u5F53\u524D\u8BB0\u5F55)
sql.school.teacher.countTeacherBySchoolIdAndStaffNumberAndIdSql=SELECT count(id) FROM TTeacher WHERE schoolID = ? AND staffNumber = ? and id <> ?
#\u901A\u8FC7\u5B66\u6821\u548C\u8EAB\u4EFD\u8BC1\u7EDF\u8BA1\u6559\u5E08
sql.school.teacher.countTeacherBySchoolIdAndIdCard=SELECT count(DISTINCT (realName)) FROM TTeacher WHERE schoolID = ? AND idCard = ?
#\u5220\u9664\u8001\u5E08
sql.school.teacher.deleteTeacher=DELETE FROM TTeacher WHERE id=?
#\u67E5\u8BE2\u672A\u6FC0\u6D3B\u6559\u5E08
sql.school.teacher.queryUnActiveTeacherListBySchoolId=SELECT t1.id,t1.schoolID,t1.schoolName,t1.realName,t2.userName mobilephone,t2.id teacherLoginId,t2.tryStatus FROM TTeacher t1,TTeacherLogin t2 WHERE t1.id=t2.teacherId AND t2.status = 0 AND t1.schoolID=?
#\u5220\u9664\u6559\u5E08\u767B\u9646\u8868\u6570\u636E
sql.school.teacher.deleteTeacherLogin = DELETE FROM TTeacherLogin WHERE schoolId=? and teacherId=?

#----------- \u6559\u5E08\u767B\u5F55 -------------------------
#\u67E5\u8BE2\u6559\u5E08\u767B\u5F55\u4FE1\u606F
sql.school.teacherLogin.queryTeacherLoginByTeacherId=SELECT id,userName,password,realName,schoolId,teacherId,status FROM TTeacherLogin t1 WHERE t1.teacherId = ?
#\u65B0\u589E\u6559\u5E08\u767B\u5F55\u8868
sql.school.teacherLogin.addTeacherLogin=INSERT INTO TTeacherLogin(userName,password,realName,schoolId,teacherId,status,creator,creatorName,creationTime) VALUE (?,?,?,?,?,0,?,?,now())
#\u65B0\u589E\u6559\u5E08\u767B\u5F55\u8868(\u8BD5\u7528)
sql.school.teacherLogin.addTeacherLogin2=INSERT INTO TTeacherLogin(userName,password,realName,schoolId,teacherId,status,creator,creatorName,creationTime,tryEndDate,tryStatus) VALUE (?,?,?,?,?,0,?,?,now(),?,1)
#\u66F4\u65B0\u6559\u5E08\u767B\u5F55\u8868
sql.school.teacherLogin.updateTeacherLogin=UPDATE TTeacherLogin SET userName = ?,realName = ?,schoolId = ?,teacherId = ?,modifier=?,modifierName=?,modifyTime=now() WHERE  id=?
#\u66F4\u65B0\u6559\u5E08\u767B\u5F55\u8868
sql.school.teacherLogin.updateTeacherLoginByTeacherId=UPDATE TTeacherLogin SET userName = ?,realName = ?,schoolId = ?,modifier=?,modifierName=?,modifyTime=now() WHERE  teacherId=?
#\u66F4\u65B0\u6559\u5E08\u767B\u5F55\u8868(\u8BD5\u7528)
sql.school.teacherLogin.updateTeacherLoginByTeacherId2=UPDATE TTeacherLogin SET userName = ?,realName = ?,schoolId = ?,modifier=?,modifierName=?,modifyTime=now(),tryEndDate = ? WHERE  teacherId=?
#\u66F4\u65B0\u6559\u5E08\u767B\u5F55\u8868\u5BC6\u7801
sql.school.teacherLogin.updateTeacherLoginPasswordById=UPDATE TTeacherLogin SET password = ? WHERE id = ?
#\u66F4\u65B0\u6559\u5E08\u767B\u5F55\u8868\u5BC6\u7801
sql.school.teacherLogin.activeTeacherLogin=UPDATE TTeacherLogin SET status = 1 WHERE id = ?
#\u66F4\u65B0\u6559\u5E08\u767B\u5F55\u5934\u50CF
sql.school.teacherLogin.updateAvatar=UPDATE TTeacherLogin SET avatarId=?,avatarAddress=?,modifier=?,modifyTime=now() WHERE id=?

#\u66F4\u65B0\u6559\u5E08\u767B\u5F55\u5934\u50CF(\u624B\u673Aapp)
sql.school.teacherLogin.updateAvatarMobile=UPDATE TTeacherLogin SET avatarId=?,avatarAddress=?,modifier=?,modifyTime=now() WHERE id=?





#\u6839\u636E\u4E3B\u952Eid\u67E5\u8BE2\u6559\u5E08\u767B\u5165\u5934\u50CF
sql.school.teacherLogin.getAvatar=select avatarAddress from TTeacherLogin WHERE ID = ?

#\u6839\u636E\u4E3B\u952Eid\u67E5\u8BE2\u6559\u5E08\u767B\u5165\u5934\u50CF
sql.school.teacherLogin.getAvatarMobile=select avatarAddress from TTeacherLogin WHERE ID = ?



#\u9A8C\u8BC1\u5B66\u7C4D\u53F7\u5408\u6CD5\u6027
sql.school.teacherLogin.queryNumberIsCorrect = SELECT COUNT(1) FROM TTeacherLogin WHERE userName = ?
#\u66F4\u65B0\u6559\u5E08\u767B\u5F55\u5934\u50CF
sql.school.teacherLogin.importPCIDPhoto=UPDATE TTeacherLogin SET IDPhotoAddress=?,modifier=?,modifierName=?,modifyTime=now() WHERE userName=?
#\u66F4\u65B0\u6559\u5E08\u767B\u5F55\u5934\u50CF
sql.school.teacherLogin.showAvatar=SELECT avatarAddress FROM TTeacherLogin WHERE userName=? and schoolId = ?

#----------- \u6559\u5E08\u89D2\u8272 -------------------------
#\u67E5\u8BE2\u6559\u5E08\u89D2\u8272\u4FE1\u606F
sql.school.teacherRole.queryRoleListByTeacherId=SELECT id,roleCode,roleName,teacherID,teacherName FROM TTeacherRole WHERE teacherID=?
#\u65B0\u589E\u6559\u5E08\u89D2\u8272
sql.school.teacherRole.addTeacherRole=INSERT INTO TTeacherRole(roleCode, roleName, teacherID, teacherName, creator, creatorName,creationTime) VALUE (?,?,?,?,?,?,now())
#\u901A\u8FC7teacherId\u5220\u9664\u6559\u5E08\u89D2\u8272
sql.school.teacherRole.deleteTeacherRoleByTeacherId=DELETE FROM TTeacherRole WHERE teacherID=?

#\u67E5\u8BE2\u51FA\u73ED\u4E3B\u4EFB\u8D1F\u8D23\u7684\u6240\u6709\u73ED\u7EA7\u4FE1\u606F
sql.school.teacher.queryClassforClassManger=SELECT cl.id as classId,cl.gradeName,cl.name as className,count(stu.uid) as totalPeople FROM school.TClass cl \
  LEFT JOIN person.TStudent stu ON stu.classID = cl.id WHERE cl.schoolId = ? AND cl.classManagerId = ? GROUP BY stu.classID 
#\u67E5\u8BE2\u51FA\u5B66\u79D1\u8001\u5E08\u8D1F\u8D23\u7684\u6240\u6709\u73ED\u7EA7\u4FE1\u606F
sql.school.teacher.queryClassforSubjectTeacher= \
  SELECT sql_no_cache cl.id as classId,cl.classManagerId,cl.classManagerName,ttc.gradeName,ttc.className, \
  GROUP_CONCAT(DISTINCT tt.subjectName) as subjectNames, \
  (select COUNT(DISTINCT stu.uid) from person.TStudent stu where stu.classID = cl.id ) as totalPeople \
  FROM school.TClass cl \
  LEFT JOIN school.TSubjectTeacherClass ttc ON ttc.classId = cl.id \
  LEFT JOIN school.TSubjectTeacher tt ON tt.id = ttc.subjectTeacherId \
  WHERE cl.schoolId = ? AND tt.teacherId = ? GROUP BY cl.id 
#  SELECT cl.id as classId,cl.classManagerId,cl.classManagerName,ttc.gradeName,ttc.className,GROUP_CONCAT(DISTINCT tt.subjectName) as subjectNames,COUNT(DISTINCT stu.uid) as totalPeople \
#  FROM school.TClass cl LEFT JOIN school.TSubjectTeacherClass ttc ON ttc.classId = cl.id \
#  LEFT JOIN school.TSubjectTeacher tt on tt.id = ttc.subjectTeacherId LEFT JOIN person.TStudent stu on stu.classID = cl.id \
#  WHERE cl.schoolId = ? AND tt.teacherId = ? GROUP BY cl.id;
#\u6839\u636E\u73ED\u7EA7id\u67E5\u51FA\u6240\u6709\u5B66\u751F
sql.school.teacher.queryStudentByClassId=SELECT DISTINCT a.uid as studentID FROM person.TStudent a WHERE a.classID IN (:classIds) 
#\u6839\u636EId \u67E5\u8BE2\u5B66\u6821\u6240\u6709\u73ED\u7EA7\u4FE1\u606F
sql.school.getClassDataBySchoolId = SELECT id,name,schoolId,schoolName,gradeId,gradeName from TClass where schoolId=? and status=1 ORDER BY gradeId,sort

#----------- \u5B66\u5E74\u5B66\u671F -------------------------
#\u5F53\u524D\u5B66\u5E74
sql.school.yearTerm.queryCurrentSchoolYear=SELECT id,name,startDate,endDate,flag FROM TSchoolYear WHERE flag = 1
#\u5F53\u524D\u5B66\u671F
sql.school.yearTerm.queryCurrentSchoolTerm=SELECT id,name,startDate,endDate,value,flag,schoolYearId,schoolYearName,schoolId,schoolName FROM TTerm where schoolId=? AND flag=1
#\u6839\u636E\u5B66\u6821id,\u5B66\u671Fid,flag,\u83B7\u5F97\u5B66\u751F\u7684\u6240\u6709termId\u6570\u636E \uFF08\u9AD8\u4E2D\uFF09
sql.school.yearTerm.queryTermIdBySchoolId=SELECT * from (SELECT id,name,startDate,endDate,value,flag,schoolYearId,schoolYearName,schoolId,schoolName,statusId from TTerm where \
  schoolId=? and id <=? and statusId = 1 ORDER BY id desc LIMIT ?) as a ORDER BY id
#\u67E5\u8BE2\u5B66\u6821\u5B66\u671F
sql.school.yearTerm.queryTermBySchoolId=SELECT id,schoolYearId,schoolYearName,name,value,startDate,endDate,flag FROM TTerm WHERE schoolId = ?
#\u66F4\u65B0\u5B66\u671F\u65E5\u671F
sql.school.yearTerm.updateTermDate=UPDATE TTerm SET startDate=?,endDate=? WHERE id=?
#\u6839\u636EId\u67E5\u8BE2\u5B66\u6821\u5B66\u671F
sql.school.yearTerm.queryTermById=SELECT id,schoolYearId,schoolYearName,name,value,startDate,endDate,flag FROM TTerm WHERE id = ?
#\u6839\u636E\u5B66\u6821id\u548C\u5B66\u5E74id\u83B7\u53D6\u5B66\u671F
sql.school.yearTerm.queryTermByYearIdAndSchoolId=SELECT id,schoolYearId,schoolYearName,name,value,startDate,endDate,flag FROM TTerm WHERE schoolYearId = ? and schoolId = ? ORDER BY value asc
#\u6839\u636EId\u548CValue\u67E5\u8BE2\u5B66\u6821\u5B66\u671F
sql.school.yearTerm.queryTermBySchoolYearIdAndValue=SELECT id,schoolYearId,schoolYearName,name,value,startDate,endDate,flag FROM TTerm WHERE schoolYearId = ? and \
  value = ?

#\u6839\u636E\u533A\u53BF\u67E5\u8BE2\u5B66\u5E74\u5B66\u671F
sql.school.yearTerm.getYearTermByRegion=select t1.name as name,max(t1.endDate) as enDate,min(t1.startDate) as startDate from TTerm t1 join TSchool t2 on t1.schoolId=t2.id where t2.area=? group by t1.name order by max(t1.startDate) desc

#\u6839\u636E\u5730\u5E02\u67E5\u8BE2\u5B66\u5E74\u5B66\u671F
sql.school.yearTerm.getYearTermByCity=select t1.name as name,max(t1.endDate) as enDate,min(t1.startDate) as startDate from TTerm t1 join TSchool t2 on t1.schoolId=t2.id where t2.city=? group by t1.name order by max(t1.startDate) desc

#\u67E5\u8BE2\u5B66\u5E74
sql.school.yearTerm.getYearList=select id,name,flag as isCurrent from TSchoolYear order by sort

#----------- \u5E74\u7EA7\u73ED\u7EA7 -------------------------
#\u901A\u8FC7\u5B66\u6821ID\u67E5\u5E74\u7EA7
sql.school.gradeClass.getGradeBySchoolId=SELECT id,name,type,typeName,intoSchoolYear,managerId,managerName,schoolId,schoolName,schoolType,schoolTypeName,status,sort FROM TGrade where status=1 and schoolId=? order by sort
#\u901A\u8FC7\u5B66\u6821ID\u3001\u7C7B\u578B \u67E5\u5E74\u7EA7
sql.school.gradeClass.getGradeBySchoolIdAndType=SELECT id,name,type,typeName,intoSchoolYear,managerId,managerName,schoolId,schoolName,schoolType,schoolTypeName,status,sort FROM TGrade where status=1 and schoolId=? AND type=? order by sort
#\u901A\u8FC7\u5E74\u6BB5\u957FID\u67E5\u8BE2\u5E74\u7EA7
sql.school.gradeClass.getGradeListByTeacherId=SELECT id,name,type,typeName,intoSchoolYear,managerId,managerName,schoolId,schoolName,schoolType,schoolTypeName,status,sort FROM TGrade where status=1 and managerId=? order by sort
#\u66F4\u65B0\u5E74\u6BB5\u957F
sql.school.gradeClass.updateGradeManager=UPDATE TGrade SET managerId=?,managerName=? WHERE id=?
#\u6839\u636E\u5B66\u6821ID\uFF0C\u5E74\u7EA7ID\u83B7\u5F97\u73ED\u7EA7
sql.school.gradeClass.getClassListByGradeId=select id,name,schoolId,schoolName,gradeId,gradeName,classManagerId,classManagerName,totalPeople,status,sort from TClass \
   where status=1 and schoolId = ? and gradeId = ? order by sort
#\u6839\u636E\u5B66\u6821ID\uFF0C\u83B7\u5F97\u73ED\u7EA7\u6570\u636E
sql.school.gradeClass.getClassListBySchoolId=select a.id,a.name,a.schoolId,a.schoolName,a.gradeId,a.gradeName,ifnull(c.sum, 0) AS number \
  from TClass a LEFT JOIN (SELECT COUNT(*) AS sum,b.schoolID,b.schoolName,b.gradeId,b.gradeName,b.classID,b.className FROM person.TStudent b \
  where schoolID= ? and gradeId != 'null' GROUP BY b.classID ORDER BY b.gradeId, b.classID) as c on a.id = c.classID where a.status= 1 \
  and a.schoolId= ? order by a.gradeId,a.id  
#\u901A\u8FC7\u6559\u5E08ID\u67E5\u8BE2\u73ED\u7EA7
sql.school.gradeClass.getClassListByTeacherId=select id,name,schoolId,schoolName,gradeId,gradeName,classManagerId,classManagerName,totalPeople,status,sort from TClass \
   where status=1 and classManagerId = ? order by sort
#\u901A\u8FC7\u73ED\u7EA7ID\u67E5\u8BE2\u73ED\u4E3B\u4EFB
sql.school.gradeClass.getTeacherByClassId=select id,name,schoolId,schoolName,gradeId,gradeName,classManagerId,classManagerName,totalPeople,status,sort from TClass \
   where status=1 and id =  ? order by sort
#\u901A\u8FC7\u5B66\u751FID\u67E5\u8BE2\u73ED\u7EA7\u5E74\u6BB5\u4FE1\u606F
sql.school.gradeClass.getClassByStudentId=select uid,userName,classID,className,gradeId,gradeName from TStudent \
   where status=1 and uid =  ? 
#\u66F4\u65B0\u73ED\u4E3B\u4EFB
sql.school.gradeClass.updateClassManager=UPDATE TClass SET classManagerId=?,classManagerName=? WHERE id=?
#\u65B0\u589E\u73ED\u7EA7
sql.school.gradeClass.addClass=INSERT INTO TClass(name,schoolId,schoolName,gradeId,gradeName,totalPeople,status,sort,creator,creationTime) VALUE(?,?,?,?,?,0,1,?,?,now())
#\u5220\u9664\u73ED\u7EA7
sql.school.gradeClass.deteleClass=DELETE FROM TClass WHERE id = ?
#\u6839\u636E\u73ED\u7EA7ID\u67E5\u8BE2\u73ED\u7EA7\u4FE1\u606F
sql.school.gradeClass.getClassById=select id,name,schoolId,schoolName,gradeId,gradeName,classManagerId,classManagerName,totalPeople,status,sort from TClass \
   where status=1 and id = ? order by sort
#\u6839\u636E\u533A\u53BF\u5B66\u6821\u7C7B\u578B\u67E5\u8BE2\u5E74\u7EA7
sql.school.gradeClass.getGradeByRegionAndSchoolType=select t1.name as gradeName from TGrade t1 join TSchool t2 on t1.schoolId=t2.id where t2.area=? and t2.type=? group by t1.`name` order by t1.sort

#\u6839\u636E\u5730\u5E02\u5B66\u6821\u7C7B\u578B\u67E5\u8BE2\u5E74\u7EA7
sql.school.gradeClass.getGradeByCityAndSchoolType=select t1.name as gradeName from TGrade t1 join TSchool t2 on t1.schoolId=t2.id where t2.city=? and t2.type=? group by t1.`name` order by t1.sort


#----------- \u79D1\u76EE -------------------------
#\u67E5\u8BE2\u7CFB\u7EDF\u79D1\u76EE\u5217\u8868
sql.school.subject.getSystemSubjectList=SELECT id,name,hasPrimary,hasJunior,hasSenior from TSystemSubject
#\u67E5\u8BE2\u7CFB\u7EDF\u79D1\u76EE
sql.school.subject.getSystemSubject=SELECT id,name,hasPrimary,hasJunior,hasSenior from TSystemSubject WHERE name = ?
#\u67E5\u8BE2\u7CFB\u7EDF\u79D1\u76EE2
sql.school.subject.getSystemSubject2=SELECT id,name,hasPrimary,hasJunior,hasSenior from TSystemSubject WHERE name = ? and juniorSubjectType = ?
#\u67E5\u8BE2\u5B66\u6821\u79D1\u76EE\u5217\u8868
sql.school.subject.getSchoolSubjectList=SELECT id,name,schoolId,schoolName,juniorSubjectType,subject,credit,termName,subjectTime from TSchoolSubject WHERE schoolId = ? ORDER BY subject,name
#\u901A\u8FC7\u540D\u79F0\u67E5\u8BE2\u5B66\u6821\u79D1\u76EE
sql.school.subject.getSchoolSubjectByName=SELECT id,name,schoolId,schoolName from TSchoolSubject WHERE schoolId = ? AND name = ?
#\u901A\u8FC7\u5B66\u6821\u540D\u79F0\u548C\u5B66\u671F\u67E5\u8BE2\u5B66\u6821\u79D1\u76EE
sql.school.subject.getSchoolSubjectByNameAndTermName=SELECT id,name,schoolId,schoolName from TSchoolSubject WHERE schoolId = ? AND name = ? and termName = ?
#\u65B0\u589E\u5B66\u6821\u79D1\u76EE
sql.school.subject.addSchoolSubject=INSERT INTO TSchoolSubject(name,subjectTime,schoolId,schoolName,creator,creationTime) VALUE (?,?,?,?,?,NOW())
#\u65B0\u589E\u5B66\u6821\u79D1\u76EE(\u9AD8\u4E2D)
sql.school.subject.addSchoolSubject2=INSERT INTO TSchoolSubject(name,subjectTime,schoolId,schoolName,creator,juniorSubjectType,subject,credit,termName,creationTime) VALUE (?,?,?,?,?,?,?,?,?,NOW())
#\u65B0\u589E\u7CFB\u7EDF\u79D1\u76EE
sql.school.subject.addSysSubject=INSERT INTO TSystemSubject(name,hasPrimary,hasJunior,hasSenior,creator,creationTime) VALUE (?,?,?,?,?,NOW())
#\u65B0\u589E\u9AD8\u4E2D\u7CFB\u7EDF\u79D1\u76EE
sql.school.subject.addSysSubjectForJunior=INSERT INTO TSystemSubject(name,hasPrimary,hasJunior,hasSenior,creator,creationTime,juniorSubjectTypeName,juniorSubjectType) VALUE (?,?,?,?,?,NOW(),?,?)

#\u901A\u8FC7\u73ED\u7EA7ID\u67E5\u8BE2\u6210\u7EE9\u8868\u79D1\u76EE\u5217\u8868(\u7EFC\u5408\u67E5\u8BE2\u901A\u8FC7\u6210\u7EE9\u8868\u7EDF\u8BA1\u663E\u793A\u5386\u53F2\u6709\u6210\u7EE9\u7684\u79D1\u76EE)
sql.school.subject.getGradeSubjectListByGradeIdInTStudentAchievement=SELECT a.id,a.subjectId,a.subjectName,a.studentId,a.isSysSubject,a.termId FROM exam.TStudentAchievement a where a.gradeId = ?  \

#\u901A\u8FC7\u5E74\u7EA7ID\u67E5\u8BE2\u5E74\u7EA7\u79D1\u76EE\u5217\u8868(\u7EFC\u5408\u67E5\u8BE2\u67E5\u8BE2\u79D1\u76EE\u8868)
sql.school.subject.getGradeSubjectListByGradeId=SELECT classHour,credit,termName,id,schoolId,schoolName,gradeId,gradeName,subjectId,IFNULL(shortName,subjectName) AS subjectName,isSysSubject FROM TGradeSubject WHERE gradeId=?
#\u901A\u8FC7\u5E74\u7EA7ID\u4E0E\u5B66\u671F\u67E5\u8BE2\u5E74\u7EA7\u79D1\u76EE\u5217\u8868\uFF08\u9AD8\u4E2D\uFF09
sql.school.subject.getGradeSubjectListByGradeIdAndName=SELECT subject,juniorSubjectType,juniorSubjectTypeName,classHour,credit,termName,id,schoolId,schoolName,gradeId,\
  gradeName,subjectId,IFNULL(shortName,subjectName) AS subjectName,isSysSubject FROM TGradeSubject WHERE gradeId=? and termName=? 
#\u901A\u8FC7\u5B66\u671FID\u548C\u5B66\u751FID\u67E5\u8BE2\u5386\u53F2\u5E74\u7EA7ID
sql.school.subject.getGradeId = select gradeId from TStudentOldData where studentId = ? and termId = ?;
#\u901A\u8FC7\u5E74\u7EA7ID\u67E5\u8BE2\u5E74\u7EA7\u79D1\u76EEID\u4E32
sql.school.subject.getGradeSubjectConcatStrByGradeId=SELECT GROUP_CONCAT(CONCAT_WS('_',subjectId,subjectName)) AS subject FROM TGradeSubject WHERE gradeId = ?
#\u5206\u7EC4\u6C47\u603B\u5E74\u7EA7\u79D1\u76EE
sql.school.subject.getGradeSubjectGroupBySubject=SELECT 1 as isSysSubject,subjectId,subjectName,GROUP_CONCAT(gradeId) grade FROM TGradeSubject WHERE schoolId=? AND isSysSubject =1 \
  GROUP BY subjectId,subjectName \
  UNION \
  SELECT 0 as isSysSubject,subjectId,subjectName,GROUP_CONCAT(gradeId) grade FROM TGradeSubject WHERE schoolId=? AND isSysSubject =0 \
  GROUP BY subjectId,subjectName \
  ORDER BY isSysSubject desc,subjectId
#\u67E5\u8BE2\u7CFB\u7EDF\u79D1\u76EE\u662F\u5426\u5DF2\u88AB\u5E94\u7528
sql.school.subject.getGradeSubjectByName = select id,subjectName from TGradeSubject where schoolId = ? and  subjectName = ? and juniorSubjectType = ?
#\u6839\u636E\u4E3B\u952Eid\u5220\u9664\u7CFB\u7EDF\u79D1\u76EE
sql.school.subject.deleteSystemSubject = delete from TSystemSubject where id = ?
#\u65B0\u589E\u5E74\u7EA7\u79D1\u76EE
sql.school.subject.addGradeSubject1=INSERT INTO TGradeSubject(schoolId,schoolName,gradeId,gradeName,subjectId,subjectName,isSysSubject,creator,creationTime)VALUE(?,?,?,?,?,?,?,?,NOW())
#\u65B0\u589E\u5E74\u7EA7\u79D1\u76EE\uFF08\u9AD8\u4E2D\uFF09
sql.school.subject.addGradeSubject=INSERT INTO TGradeSubject(schoolId,schoolName,gradeId,gradeName,subjectId,subjectName,isSysSubject,creator,juniorSubjectType,subject,credit,classHour,termName,creationTime)VALUE(?,?,?,?,?,?,?,?,?,?,?,?,?,NOW())
#\u5220\u9664\u5E74\u7EA7\u79D1\u76EE
sql.school.subject.deleteGradeSubject=DELETE FROM TGradeSubject WHERE id = ?
#\u5220\u9664\u5E74\u7EA7\u79D1\u76EE\u5217\u8868\u4E2D\u7684\u7CFB\u7EDF\u79D1\u76EE
sql.school.subject.deleteGradeSystemSubject=DELETE FROM TGradeSubject WHERE gradeId = ? AND subjectId != 0
#\u5220\u9664\u5E74\u7EA7\u79D1\u76EE\u5217\u8868\u4E2D\u7684\u7CFB\u7EDF\u79D1\u76EE(\u9AD8\u4E2D)
sql.school.subject.deleteGradeSystemSubject2=DELETE FROM TGradeSubject WHERE gradeId = ? AND termName = ? AND subjectId != 0
#\u6839\u636E\u7C7B\u522B\u67E5\u8BE2\u7CFB\u7EDF\u79D1\u76EE
sql.school.subject.getSubjectByType = select id,name,juniorSubjectType from TSystemSubject where juniorSubjectType = ? and hasSenior = 1
#\u65B0\u589E\u79D1\u76EE
sql.school.subject.addSubject = INSERT INTO TGradeSubject set subjectName = ?,juniorSubjectType = ?,subject=?,classHour = ?,credit = ?,schoolId = ?,schoolName = ?,creator = ?,gradeId = ?,gradeName = ?,subjectId = ?,isSysSubject = ?,termName = ?,creationTime = now()

#----------- \u79D1\u76EE\u8001\u5E08 -------------------------
#\u901A\u8FC7\u79D1\u76EE\u67E5\u8BE2\u79D1\u76EE\u6559\u5E08\u5217\u8868
sql.school.subjectTeacher.getSubjectTeacherListBySubject=SELECT id,subjectId,subjectName,isSysSubject,teacherId,teacherName FROM TSubjectTeacher WHERE subjectId=? AND isSysSubject = ? AND schoolId = ?
#\u901A\u8FC7\u79D1\u76EE\u6559\u5E08\u67E5\u8BE2\u79D1\u76EE\u6559\u5E08\u5217\u8868
sql.school.subjectTeacher.getSubjectTeacherListBySubjectTeacher=SELECT id,subjectId,subjectName,isSysSubject,teacherId,teacherName FROM TSubjectTeacher WHERE subjectId=? AND isSysSubject = ? AND teacherId=?
#\u901A\u8FC7\u79D1\u76EE\u67E5\u8BE2\u79D1\u76EE\u6559\u5E08(\u73ED\u7EA7)\u5217\u8868
sql.school.subjectTeacher.getSubjectTeacherWithClassListBySubject=SELECT t1.id AS subjectTeacherId,t1.subjectId,t1.subjectName,t1.isSysSubject,t1.teacherId,t1.teacherName,\
  t2.gradeId,t2.gradeName,GROUP_CONCAT(CONCAT_WS('_',t2.id,t2.classId,t2.className)) AS class \
  FROM TSubjectTeacher t1 LEFT JOIN TSubjectTeacherClass t2 ON t1.id=t2.subjectTeacherId \
  WHERE t1.subjectId = ? AND t1.isSysSubject = ? AND t1.schoolId = ? \
  GROUP BY t1.id,t1.subjectId,t1.subjectName,t1.isSysSubject,t2.gradeId,t2.gradeName
#\u65B0\u589E\u79D1\u76EE\u6559\u5E08
sql.school.subjectTeacher.addSubjectTeacher=INSERT INTO TSubjectTeacher(subjectId,subjectName,isSysSubject,schoolId,schoolName,teacherId,teacherName,creator,creationTime) VALUE (?,?,?,?,?,?,?,?,NOW())
#\u4FEE\u6539\u79D1\u76EE\u6559\u5E08
sql.school.subjectTeacher.updateSubjectTeacherSql=UPDATE TSubjectTeacher SET subjectId = ?,subjectName = ?,isSysSubject = ?,schoolId = ?,schoolName = ?,teacherId = ?,teacherName = ?,creationTime = NOW(),creator = ? WHERE id = ?
#\u5220\u9664\u79D1\u76EE\u6559\u5E08
sql.school.subjectTeacher.deleteSubjectTeacher=DELETE FROM TSubjectTeacher WHERE subjectId = ? AND isSysSubject=? AND teacherId= ?
#\u5220\u9664\u79D1\u76EE\u6559\u5E08(\u901A\u8FC7ID)
sql.school.subjectTeacher.deleteSubjectTeacherById=DELETE FROM TSubjectTeacher WHERE id = ?
#\u901A\u8FC7\u79D1\u76EE\u6559\u5E08\u67E5\u8BE2\u79D1\u76EE\u6559\u5E08\u73ED\u7EA7\u5217\u8868
sql.school.subjectTeacher.getSubjectTeacherClassListBySubjectAndTeacher=SELECT t1.id,t1.schoolId,t1.schoolName,t1.gradeId,t1.gradeName,t1.classId,t1.className,t2.subjectId,t2.subjectName,t2.teacherId,t2.teacherName FROM TSubjectTeacherClass t1 \
   LEFT JOIN TSubjectTeacher t2 ON t1.subjectTeacherId = t2.id WHERE t2.subjectId=? AND t2.isSysSubject=? AND t2.teacherId=?
#\u5224\u65AD\u8BE5\u5E74\u7EA7\u73ED\u7EA7\u79D1\u76EE\u662F\u5426\u5DF2\u6709\u8001\u5E08\u6559\u6388
sql.school.subjectTeacher.getClassSubjectInfo=SELECT t1.id,t1.subjectName,t1.teacherId,t1.teacherName,t2.id AS subjectTeacherId FROM TSubjectTeacher t1,TSubjectTeacherClass t2 WHERE t1.id=t2.subjectTeacherId AND t2.schoolId=? AND t2.gradeId = ? AND t2.classId = ? AND t1.subjectName= ? AND t1.isSysSubject=?
#\u65B0\u589E\u79D1\u76EE\u6559\u5E08\u73ED\u7EA7
sql.school.subjectTeacher.addSubjectTeacherClass=INSERT INTO TSubjectTeacherClass(subjectTeacherId,schoolId,schoolName,gradeId,gradeName,classId,className,creator,creationTime) VALUE (?,?,?,?,?,?,?,?,NOW())
#\u4FEE\u6539\u79D1\u76EE\u6559\u5E08\u73ED\u7EA7
sql.school.subjectTeacher.updateSubjectTeacherClassSql=UPDATE TSubjectTeacherClass \
SET subjectTeacherId = ?, schoolId = ?, schoolName = ?,gradeId = ?,gradeName = ?,\
classId = ?,className = ?,creator = ?,creationTime = NOW() WHERE id = ?
#\u5220\u9664\u79D1\u76EE\u6559\u5E08\u73ED\u7EA7
sql.school.subjectTeacher.deleteSubjectTeacherClassBySubjectTeacher=DELETE FROM TSubjectTeacherClass WHERE subjectTeacherId=?
#\u5220\u9664\u79D1\u76EE\u6559\u5E08\u73ED\u7EA7
sql.school.subjectTeacher.deleteSubjectTeacherClassBySubjectTeacherAndGrade=DELETE FROM TSubjectTeacherClass WHERE subjectTeacherId=? AND gradeId=?
#\u5220\u9664\u79D1\u76EE\u6559\u5E08\u73ED\u7EA7
sql.school.subjectTeacher.deleteSubjectTeacherClassBySubjectTeacherAndClass=DELETE FROM TSubjectTeacherClass WHERE subjectTeacherId=? AND classId=?

#\u6839\u636E\u6559\u5E08Id \u67E5\u8BE2\u6240\u6559\u6388\u7684\u73ED\u7EA7
sql.school.subjectTeacher.getClassByTeacherId = \
  SELECT DISTINCT \
	gradeId, \
	gradeName, \
	classId, \
	className \
FROM \
	TSubjectTeacherClass a, \
	TSubjectTeacher b \
WHERE \
	b.`schoolId` = ? \
 and a.`schoolId`  = b.`schoolId` \
AND a.subjectTeacherId = b.id \
AND b.teacherId = ? \
ORDER BY \
	gradeId,\
	classId

#\u901A\u8FC7\u6559\u5E08ID\u548C\u73ED\u7EA7Id\u67E5\u8BE2\u79D1\u76EE
sql.school.subjectTeacher.getSubjectByTeacherIdAndClassId=\
SELECT \
  subjectId, \
  subjectName, \
  isSysSubject \
FROM \
  TSubjectTeacherClass a, \
  TSubjectTeacher b \
WHERE \
  classId = ? \
  and b.`schoolId` = ? \
 and a.`schoolId`  = b.`schoolId` \
  AND a.subjectTeacherId = b.id \
  AND b.teacherId = ? order by subjectName

#\u901A\u8FC7\u6559\u5E08ID\u67E5\u8BE2\u79D1\u76EE
sql.school.subjectTeacher.getSubjectByTeacherId=\
SELECT \
  subjectId, \
  subjectName \
FROM \
  TSubjectTeacher \
WHERE \
  teacherId = ?

#\u6839\u636E\u5B66\u6821\u67E5\u8BE2\u79D1\u76EE\u8001\u5E08\u4FE1\u606F
sql.school.subjectTeacher.getSubjectTeacherBySchoolId=\
  SELECT \
  a.gradeId,\
  a.classId,\
  b.subjectId, \
  b.teacherId \
FROM \
  TSubjectTeacherClass a \
  JOIN \
  TSubjectTeacher b \
  ON a.subjectTeacherId=b.id \
WHERE \
  a.schoolId=? \

#\u4FEE\u6539\u5BC6\u7801\u64CD\u4F5C\u2014\u67E5\u8BE2\u6559\u5E08\u767B\u9646\u8868\u4FE1\u606F
sql.school.updatePassword.getOriginalPassword = select id,userName,password,realName from TTeacherLogin where userName = ? and status = 1 and schoolId = ?
#\u4FEE\u6539\u5BC6\u7801\u64CD\u4F5C\u2014\u67E5\u8BE2\u5BB6\u957F\u767B\u9646\u8868\u4FE1\u606F
sql.school.updatePassword.getParentPassword = select id,userName,password,realName from TParentLogin where userName = ? and status = 1
#\u4FEE\u6539\u5BC6\u7801\u64CD\u4F5C\u2014\u67E5\u8BE2\u5B66\u751F\u767B\u9646\u8868\u4FE1\u606F
sql.school.updatePassword.getStudentPassword = select id,userName,password,realName from TStudentLogin where userName = ? and status = 1 and schoolId = ?

#\u4FEE\u6539\u6559\u5E08\u767B\u9646\u5BC6\u7801
sql.school.updatePassword.updateTeacherPassword = update TTeacherLogin set password = ?,modifier=0,modifyTime=NOW(),modifierName='\u4FEE\u6539\u5BC6\u7801\u64CD\u4F5C' where userName = ? and status = 1 and schoolId = ?
#\u4FEE\u6539\u5BB6\u957F\u767B\u9646\u5BC6\u7801
sql.school.updatePassword.updateParentPassword = update TParentLogin set password = ?,modifier=0,modifyTime=NOW(),modifierName='\u4FEE\u6539\u5BC6\u7801\u64CD\u4F5C' where userName = ? and status = 1
#\u4FEE\u6539\u5B66\u751F\u767B\u9646\u5BC6\u7801
sql.school.updatePassword.updateStudentPassword = update TStudentLogin set password = ?,modifier=0,modifyTime=NOW(),modifierName='\u4FEE\u6539\u5BC6\u7801\u64CD\u4F5C' where userName = ? and status = 1 and schoolId = ?

#\u5FD8\u8BB0\u6559\u5E08\u767B\u9646\u5BC6\u7801
sql.school.updatePassword.forgetTeacherPassword = update TTeacherLogin set password = ?,modifier=0,modifyTime=NOW(),modifierName='\u5FD8\u8BB0\u5BC6\u7801\u64CD\u4F5C' where userName = ? and status = 1

#\u5FD8\u8BB0\u6559\u5E08\u767B\u9646\u5BC6\u7801
sql.school.updatePassword.forgetTeacherPasswordMobile = update TTeacherLogin set password = ?,modifier=0,modifyTime=NOW(),modifierName='\u5FD8\u8BB0\u5BC6\u7801\u64CD\u4F5C' where userName = ? and status = 1


#\u5FD8\u8BB0\u5BB6\u957F\u767B\u9646\u5BC6\u7801
sql.school.updatePassword.forgetParentPassword = update TParentLogin set password = ?,modifier=0,modifyTime=NOW(),modifierName='\u5FD8\u8BB0\u5BC6\u7801\u64CD\u4F5C' where userName = ? and status = 1
#\u5FD8\u8BB0\u5B66\u751F\u767B\u9646\u5BC6\u7801
sql.school.updatePassword.forgetStudentPassword = update TStudentLogin set password = ?,modifier=0,modifyTime=NOW(),modifierName='\u5FD8\u8BB0\u5BC6\u7801\u64CD\u4F5C' where userName = ? and status = 1

#\u6839\u636E\u5B66\u751F\u8D26\u53F7\u67E5\u8BE2\u5B66\u751F\u5BB6\u957F\u624B\u673A\u53F7
sql.school.updatePassword.getParentMobile = SELECT a.uid,a.userName,a.schoolID,b.parentId,c.mobilephone FROM TStudent as a \
  LEFT JOIN TParentStudentRelationship as b ON a.uid = b.studentId \
  LEFT JOIN TParent as c ON b.parentId = c.id where a.studentNumber=?


#----------- \u52A8\u6001 -------------------------
#\u67E5\u8BE2\u5B66\u751F\u52A8\u6001\u6570\u636E(\u8FD130\u5929)
sql.school.getDynamicDate = \
  SELECT \
    id,schoolID,studentID,studentNumber,studentName,type,typeRemark,content,\
    score,scoreName,operId,operNickName,creator,creatorName,DATE_FORMAT(creationTime,'%Y-%m-%d %H:%i') as creationTime FROM TDynamic WHERE \
    schoolID=? \
    AND studentID=? AND DATE_SUB(CURDATE(),INTERVAL 30 DAY)<=date(creationTime) ORDER BY creationTime DESC
#\u67E5\u8BE2\u5B66\u751F\u52A8\u6001\u6570\u636E
sql.school.getDynamicDateAll = \
  SELECT \
    id,schoolID,studentID,studentNumber,studentName,type,typeRemark,content,\
    score,scoreName,operId,operNickName,creator,creatorName,DATE_FORMAT(creationTime,'%Y-%m-%d %H:%i') as creationTime FROM TDynamic WHERE \
    schoolID=? \
    AND studentID=? ORDER BY creationTime DESC

#----------- \u79EF\u5206\u6A21\u5757 -------------------------
#\u67E5\u8BE2\u73ED\u7EA7\u5B66\u751F\u79EF\u5206\u5217\u8868
sql.school.getClassBonusPointByKey = \
SELECT \
  student.uid AS studentId, \
  student.userName AS studentName, \
  student.studentNumber AS studentNumber, \
  student.pinyin as pinyin, \
  ifnull(c.score, 0) AS bonusPoint \
  FROM person.TStudent student \
   LEFT JOIN school.TScoreCount c ON student.uid = c.studentID \
  AND student.schoolID = c.schoolID \
  AND student.gradeId = c.gradeId \
  AND student.classID = c.classID \
  AND c.type = 0 \
  WHERE \
   ( \
  UPPER(student.pinyin) LIKE UPPER( ? ) \
   OR UPPER(student.initials) LIKE UPPER( ? ) \
   OR UPPER(student.studentNumber) LIKE UPPER( ? ) \
   OR UPPER(student.userName) LIKE UPPER( ? ) \
  ) \
  AND student.schoolID = ? \
  AND student.gradeId = ? \
  AND student.classID = ? \
  AND student.status = 1 \
  ORDER BY bonusPoint desc, pinyin asc


#\u67E5\u8BE2\u73ED\u7EA7\u5B66\u751F\u79EF\u5206\u5217\u8868
sql.school.getBonusPointByKeyMobile = \
SELECT \
   t1.uid AS studentId, \
   t1.userName AS studentName, \
   t1.gradeId, \
   t1.gradeName, \
   t1.classID, \
   t1.className, \
   t1.studentNumber AS studentNumber, \
   t1.pinyin AS pinyin, \
   SUM( \
      CASE \
      WHEN t2.type = 6 OR t2.type = 8 \
      THEN - ifnull( score, 0 ) ELSE ifnull( score, 0 ) \
      END \
      ) AS bonusPoint, \
   t3.avatarAddress \
FROM \
   person.TStudent t1 \
LEFT JOIN school.TScoreList t2 ON t1.uid = t2.studentID AND t1.schoolID = t2.schoolID \
left join person.TStudentLogin t3 \
on t3.userName = t1.studentNumber \
   and t3.schoolID = t1.schoolID \
   and t3.status = 1 \
WHERE \
    t1.schoolID = ? \
    AND t1.STATUS = 1 


#\u6839\u636E\u5B66\u751FID\u67E5\u8BE2\u5176\u8BE6\u7EC6\u79EF\u5206\u4FE1\u606F\u7684\u5F53\u524D\u79EF\u5206
sql.school.getPointDetailByStudentIdMobile1 = \
  SELECT \
     t1.uid AS studentId, \
     t1.userName AS studentName,  \
     t1.studentNumber AS studentNumber, \
     SUM( \
         CASE \
         WHEN t2.type = 6 OR t2.type = 8 \
         THEN - ifnull( score, 0 ) ELSE ifnull( score, 0 ) \
         END \
         ) AS currPoint \
  FROM \
     person.TStudent t1 \
  LEFT JOIN school.TScoreList t2 \
  ON t1.uid = t2.studentID \
     AND t1.schoolID = t2.schoolID  \
  WHERE \
     t1.schoolID = ? \
     AND t1.uid = ? \
     AND t1.STATUS = 1 \
     AND unix_timestamp( DATE_FORMAT( t2.creationTime, '%Y-%m-%d' ) ) >= unix_timestamp( ? ) \
     AND unix_timestamp( DATE_FORMAT( t2.creationTime, '%Y-%m-%d' ) ) <= unix_timestamp( ? )

#\u6839\u636E\u5B66\u751FID\u67E5\u8BE2\u5176\u8BE6\u7EC6\u79EF\u5206\u4FE1\u606F\u7684\u6240\u83B7\u5F97\u7684\u79EF\u5206
sql.school.getPointDetailByStudentIdMobile2 = \
  SELECT \
      t2.type, \
      t2.typeRemark, \
      t2.content, \
      SUM(IFNULL(t2.score,0)) as upPoint \
  FROM \
      person.TStudent t1 \
  LEFT JOIN school.TScoreList t2 \
  ON t1.uid = t2.studentID \
     AND t1.schoolID = t2.schoolID  \
  WHERE \
     t1.schoolID = ? \
     AND t1.uid = ? \
     and t2.score > 0 \
     and t2.type not in (6,8) \
     AND t1.STATUS = 1 \
     AND unix_timestamp( DATE_FORMAT( t2.creationTime, '%Y-%m-%d' ) ) >= unix_timestamp( ? ) \
     AND unix_timestamp( DATE_FORMAT( t2.creationTime, '%Y-%m-%d' ) ) <= unix_timestamp( ? ) \
  GROUP BY \
     t2.type


#\u6839\u636E\u5B66\u751FID\u67E5\u8BE2\u5176\u8BE6\u7EC6\u79EF\u5206\u4FE1\u606F\u7684\u6240\u6263\u9664\u7684\u79EF\u5206
sql.school.getPointDetailByStudentIdMobile3 = \
SELECT \
   t2.type, \
   t2.typeRemark, \
   t2.content, \
   SUM(IFNULL(t2.score,0)) as downPoint \
FROM \
   person.TStudent t1 \
LEFT JOIN school.TScoreList t2 \
ON t1.uid = t2.studentID \
   AND t1.schoolID = t2.schoolID  \
WHERE \
   t1.schoolID = ? \
   AND t1.uid = ? \
   and (t2.type = 6 or t2.type = 8 or t2.score < 0 ) \
   AND t1.STATUS = 1 \
   AND unix_timestamp( DATE_FORMAT( t2.creationTime, '%Y-%m-%d' ) ) >= unix_timestamp( ? ) \
   AND unix_timestamp( DATE_FORMAT( t2.creationTime, '%Y-%m-%d' ) ) <= unix_timestamp( ? ) \
GROUP BY t2.type


#\u6839\u636E\u5B66\u751FID\u67E5\u8BE2\u5176\u8BE6\u7EC6\u79EF\u5206\u4FE1\u606F\u5217\u8868
sql.school.getBonusPointDetailListById = \
SELECT \
   t1.uid AS studentId, \
   t1.userName AS studentName, \
   t1.studentNumber, \
   t2.type, \
   t2.typeRemark, \
   t2.content, \
   t2.creationTime, \
   (CASE \
    WHEN t2.type = 6 OR t2.type = 8 \
    THEN - ifnull( score, 0 ) ELSE ifnull( score, 0 ) \
    END ) as score \
FROM \
   person.TStudent t1 \
LEFT JOIN school.TScoreList t2 \
ON t1.uid = t2.studentID \
   AND t1.schoolID = t2.schoolID  \
WHERE \
   t1.schoolID = ? \
   AND t1.uid = ? \
   AND t1.STATUS = 1 \
   AND unix_timestamp( DATE_FORMAT( t2.creationTime, '%Y-%m-%d' ) ) >= unix_timestamp( ? ) \
   AND unix_timestamp( DATE_FORMAT( t2.creationTime, '%Y-%m-%d' ) ) <= unix_timestamp( ? ) \
ORDER BY t2.creationTime DESC, score DESC

#\u6839\u636Eid\u67E5\u8BE2\u5B66\u671F\u4FE1\u606F
sql.school.getTermById = select * from TTerm where id = ?

#\u6839\u636Eid\u67E5\u8BE2\u5B66\u671F\u4FE1\u606F
sql.school.getTermById2 = select * from TTerm where schoolId = ? and id < ? ORDER BY id ASC


## SELECT\ student.uid AS studentId, \ student.userName AS studentName, \ student.studentNumber AS studentNumber, \ ifnull(c.score, 0) AS bonusPoint \ FROM \ person.TStudent student \ LEFT JOIN school.TScoreCount c ON student.uid = c.studentID \ AND student.schoolID = c.schoolID \ AND student.gradeId = c.gradeId \ AND student.classID = c.classID \ WHERE \ ( \ UPPER(student.pinyin) LIKE UPPER(?) \ OR UPPER(student.initials) LIKE UPPER(?) \ OR UPPER(student.studentNumber) LIKE UPPER(?) \ OR UPPER(student.userName) LIKE UPPER(?) \ ) \ AND student.schoolID = ? \ AND student.gradeId = ? \ AND student.classID = ? \ ORDER BY \ bonusPoint DESC


#\u67E5\u8BE2\u5355\u4E2A\u5B66\u751F\u79EF\u5206\u6982\u51B5(\u6559\u5E08\u3001\u5BB6\u957F\u90FD\u53EF\u4EE5\u67E5)
sql.school.getBonusPointCountByStudentId = \
SELECT \
	t1.studentID AS studentId, \
	t1.studentName, \
	t1.studentNumber, \
IF (t1.score < 0, 0, t1.score) AS bonusPoint, \
 ( \
	SELECT \
		sum(t2.score) \
	FROM \
		TScoreCount t2 \
	WHERE \
		t2.studentID = ? \
	AND type NOT IN (0, 8) \
) AS countBonusPoint, \
 ( \
	SELECT \
		ifnull(sum(0 - t2.score), 0) \
	FROM \
		TScoreCount t2 \
	WHERE \
		t2.studentID = ? \
	AND type = 8 \
) AS useCountBonusPoint \
FROM \
	TScoreCount t1 \
WHERE \
	t1.studentID = ? \
AND t1.type = 0



#\u67E5\u8BE2\u7279\u5B9A\u5B66\u751F\u79EF\u5206\u7EDF\u8BA1\uFF08\u6309\u83B7\u53D6\u6E20\u9053\uFF09(\u6559\u5E08\u3001\u5BB6\u957F\u90FD\u53EF\u4EE5\u67E5)
sql.school.getChannelCountBonusPointByStudentId = \
    SELECT t1.studentID as studentId,t1.studentName,t1.studentNumber,t1.type as channelId,t1.typeRemark as channelName,t1.score as count,DATE_FORMAT(t1.modificationTime,'%Y-%m-%d %H:%i') AS time,\
CASE (SELECT WEEKDAY(t1.modificationTime)) WHEN 0 THEN '\u661F\u671F\u4E00' WHEN 1 THEN '\u661F\u671F\u4E8C' WHEN 2  THEN '\u661F\u671F\u4E09' WHEN 3 THEN '\u661F\u671F\u56DB' WHEN 4 THEN '\u661F\u671F\u4E94' WHEN 5 THEN '\u661F\u671F\u516D' ELSE '\u661F\u671F\u5929' END AS dayOfWeek FROM TScoreCount t1 WHERE t1.type<>0 AND t1.studentID=?
#\u67E5\u8BE2\u7279\u5B9A\u5B66\u751F\u79EF\u5206\u660E\u7EC6\u6E05\u5355(\u6559\u5E08\u3001\u5BB6\u957F\u90FD\u53EF\u4EE5\u67E5)
#sql.school.getBonusPointDetailByStudentId = \
#    SELECT t1.studentID as studentId,t1.studentName,t1.studentNumber,t1.type as channelId,t1.typeRemark as channelName,DATE_FORMAT(t1.creationTime,'%Y-%m-%d %H:%i') AS time,t1.score as bonusPoint,\
#CASE (SELECT WEEKDAY(t1.creationTime)) WHEN 0 THEN '\u661F\u671F\u4E00' WHEN 1 THEN '\u661F\u671F\u4E8C' WHEN 2  THEN '\u661F\u671F\u4E09' WHEN 3 THEN '\u661F\u671F\u56DB' WHEN 4 THEN '\u661F\u671F\u4E94' WHEN 5 THEN '\u661F\u671F\u516D' ELSE '\u661F\u671F\u5929' END AS dayOfWeek \
#FROM TScoreList t1 WHERE t1.type<>6 AND t1.studentID=?
sql.school.getBonusPointDetailByStudentId = \
    SELECT t1.studentID as studentId,t1.studentName,t1.studentNumber,t1.type as channelId,t1.typeRemark as channelName,DATE_FORMAT(t1.creationTime,'%Y-%m-%d %H:%i') AS time,t1.score as bonusPoint,\
CASE (SELECT WEEKDAY(t1.creationTime)) WHEN 0 THEN '\u661F\u671F\u4E00' WHEN 1 THEN '\u661F\u671F\u4E8C' WHEN 2  THEN '\u661F\u671F\u4E09' WHEN 3 THEN '\u661F\u671F\u56DB' WHEN 4 THEN '\u661F\u671F\u4E94' WHEN 5 THEN '\u661F\u671F\u516D' ELSE '\u661F\u671F\u5929' END AS dayOfWeek \
FROM TScoreList t1 WHERE t1.studentID=?
#\u67E5\u8BE2\u7279\u5B9A\u5B66\u751F\u5199\u5B9E\u79EF\u5206\u7EDF\u8BA1(\u6559\u5E08\u3001\u5BB6\u957F\u90FD\u53EF\u4EE5\u67E5)
sql.school.getCircleCountBonusPointByStudentId = \
    SELECT t1.studentID as studentId,t1.studentName,t1.studentNumber,t1.type as channelId,t1.typeRemark as channelName,t1.score as count,DATE_FORMAT(t1.modificationTime,'%Y-%m-%d %H:%i') AS time,\
CASE (SELECT WEEKDAY(t1.modificationTime)) WHEN 0 THEN '\u661F\u671F\u4E00' WHEN 1 THEN '\u661F\u671F\u4E8C' WHEN 2  THEN '\u661F\u671F\u4E09' WHEN 3 THEN '\u661F\u671F\u56DB' WHEN 4 THEN '\u661F\u671F\u4E94' WHEN 5 THEN '\u661F\u671F\u516D' ELSE '\u661F\u671F\u5929' END AS dayOfWeek FROM TScoreCount t1 WHERE t1.type=9 AND t1.studentID=?

#\u63D2\u5165\u79EF\u5206\u5151\u6362\u8BB0\u5F55
sql.school.insertBonusPoint = \
  INSERT INTO TScoreList \
  SET \
  type = ?, \
  typeRemark = ?, \
  content = ?, \
  score = ?, \
  scoreName = ?, \
  schoolID = ?, \
  gradeID = ?, \
  classID = ?, \
  studentID = ?, \
  studentNumber = ?, \
  studentName = ?, \
  operId = ?, \
  operNickName = ?, \
  creationTime=now() 

#\u5220\u9664\u79EF\u5206\u5151\u6362\u8BB0\u5F55
sql.school.deleteBonusPoint = delete from TScoreList where content=?


#----------- \u5373\u65F6\u6FC0\u52B1 -------------------------
#\u65B0\u589E\u5373\u65F6\u6FC0\u52B1\u6307\u6807\u6E05\u5355
sql.school.addInspireQuota = INSERT INTO TInspireQuota(sort,schoolId,schoolName,quotaName,remark,quotaImgId,quotaImgUrl,quotaOperType,type,quotaScore,violationId,creator,creatorName,relation,creationTime) \
  VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?,NOW())
#\u4FEE\u6539\u5373\u65F6\u6FC0\u52B1\u6307\u6807\u6E05\u5355
sql.school.editInspireQuota = update TInspireQuota set sort=?,schoolId=?,schoolName=?,quotaName=?,remark=?,quotaImgId=?,quotaImgUrl=?,quotaOperType=?,type=?,\
  quotaScore=?,violationId=?,modifyTime=NOW(),modifier=?,modifierName=?,relation=? where id=?
#\u5220\u9664\u5373\u65F6\u6FC0\u52B1\u6307\u6807
sql.school.delInspireQuota = DELETE FROM TInspireQuota where id=?
#\u83B7\u53D6\u8BE5\u5B66\u6821\u5373\u65F6\u6FC0\u52B1\u6307\u6807\u6E05\u5355
sql.school.getInspireQuotaList = \
SELECT id,sort,CASE quotaOperType WHEN 1 THEN "\u8868\u626C" ELSE "\u8FDD\u89C4\u8FDD\u7EAA" END AS type,quotaName as shortName,remark,quotaScore as point,quotaImgUrl as imgUrl,relation from TInspireQuota where schoolID=?\

#\u67E5\u8BE2\u5B66\u751F\u5373\u65F6\u6FC0\u52B1\u7684\u5206\u6570
sql.school.inspire.sqlGetScoreByStudentId = SELECT SUM(IF(b.quotaOperType = 1, a.quotaPoint,0)) plus, SUM(IF(b.quotaOperType = 0, a.quotaPoint,0)) minus FROM school.TInspire a, school.TInspireQuota b WHERE a.quotaId = b.id AND a.studentID = ? ORDER BY a.creationTime DESC 

#\uFFFD\uFFFD\u046F\u0467\uFFFD\uFFFDid
sql.school.queryCurrentTerm=SELECT id,name,startDate,endDate FROM TTerm WHERE schoolId = ? and flag=1

#\u63D0\u4EA4\u4FDD\u5B58\u5373\u65F6\u6FC0\u52B1
sql.school.saveInspire = INSERT INTO TInspire(termId,schoolID,gradeID,classID,studentId,studentNumber,studentName,gradeName,className,quotaId,quotaName,quotaPoint,teacherId,teacherName,\
  teacherOrgId,teacherOrgName,creator,creatorName,dayOfWeek,creationTime) \
  VALUES(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,CASE (SELECT WEEKDAY(NOW())) WHEN 0 THEN '\u661F\u671F\u4E00' WHEN 1 THEN '\u661F\u671F\u4E8C' WHEN 2  THEN '\u661F\u671F\u4E09' WHEN 3 THEN '\u661F\u671F\u56DB' WHEN 4 THEN '\u661F\u671F\u4E94' WHEN 5 THEN '\u661F\u671F\u516D' ELSE '\u661F\u671F\u5929' END,NOW())

#\uFFFD\uFFFD\uFFFD\uFFFD\u0467\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD
sql.school.saveScoreCount = INSERT INTO TScoreCount(schoolID,gradeID,classID,studentID,studentNumber,studentName,score,type,typeRemark,creator,creatorName,modificationTime) \
                            VALUES (?,?,?,?,?,?,?,?,?,?,?,NOW())

#\uFFFD\uFFFD\uFFFD\uFFFD\u0467\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD
sql.school.saveScoreList = INSERT INTO TScoreList(schoolID,studentID,gradeID,classID,studentNumber,studentName,type,typeRemark,content,score,scoreName,operId,operNickName,creator,creatorName,creationTime) \
                           VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,NOW())

#\u67E5\u8BE2\u5F53\u524D\u6559\u5E08\uFF08\u53EA\u80FD\u662F\u73ED\u4E3B\u4EFB\u89D2\u8272\uFF09\u7684\u73ED\u7EA7\u7684\u6240\u6709\u5373\u65F6\u6FC0\u52B1\u6570\u636E
sql.school.getClassInspireList = \
  SELECT \
    a.id,a.studentId,a.studentName,a.studentNumber,CONCAT(a.gradeName,a.className) AS studentClassName,a.quotaId,a.quotaName AS quotaShortName,a.quotaPoint,a.teacherId,a.teacherName,a.teacherOrgId,a.teacherOrgName,DATE_FORMAT(a.creationTime,'%Y-%m-%d %H:%i') AS time,a.dayOfWeek,b.quotaOperType FROM TInspire a, TInspireQuota b WHERE a.quotaId = b.id AND \
    a.schoolID=? AND a.classID=? ORDER BY a.creationTime DESC
#\u67E5\u8BE2\u5F53\u524D\u6559\u5E08\uFF08\u53EA\u80FD\u662F\u73ED\u4E3B\u4EFB\u89D2\u8272\uFF09\u7684\u64CD\u4F5C\u7684\u6240\u6709\u5373\u65F6\u6FC0\u52B1\u6570\u636E
sql.school.getMyInspireList = \
  SELECT \
    a.id,a.studentId,a.studentName,a.studentNumber,a.classID AS studentClassId,CONCAT(a.gradeName,a.className) AS studentClassName,a.quotaId,a.quotaName AS quotaShortName,a.quotaPoint,a.teacherId,a.teacherName,a.teacherOrgId,a.teacherOrgName,DATE_FORMAT(a.creationTime,'%Y-%m-%d %H:%i') AS time,a.dayOfWeek,b.quotaOperType FROM TInspire a,TInspireQuota b WHERE a.quotaId = b.id AND \
	a.schoolID=? AND a.teacherId=? ORDER BY a.creationTime DESC
#\u6839\u636E\u4E3B\u952E\u5220\u9664\u5373\u4F7F\u8BC4\u4EF7\u4FE1\u606F
sql.school.deleteInspireStatusById = \
delete from TInspire where id = ?
#\u83B7\u53D6\u8BE5\u5B66\u6821\u8FDD\u89C4\u8FDD\u7EAA\u5217\u8868
sql.school.getViolationList = \
SELECT id,name,initials,pinyin,creator,creatorName,DATE_FORMAT(creationTime,'%Y-%m-%d %H:%i') AS creationTime from TViolationsCategory where schoolID=?
#\u6839\u636Eid \u67E5\u8BE2\u6307\u6807
sql.school.getInspireQuotaById =SELECT id,sort,quotaName,quotaImgUrl,quotaOperType,violationId,quotaScore,remark,relation FROM TInspireQuota where id=?

#\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u0223\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u0F36\uFFFD\uFFFD\u04FC\uFFFD\u02B1\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD \uFFFD\u0730\uFFFD\uFFFD\uFFFD\uFFFD\u03B7\uFFFD\uFFFD\uFFFD
sql.school.getFiveClassCheckingRankingDataInspire = SELECT a.schoolID,a.gradeID,a.classID,a.gradeName,a.className,LEFT(a.creationTime,10) AS creationTime,a.quotaName,SUM(quotaPoint) AS quotaPoint,b.quotaOperType FROM TInspire a \
LEFT JOIN TInspireQuota b ON a.quotaId = b.id \
where LEFT(a.creationTime,10) BETWEEN ? AND ? AND b.relation = 1 AND a.schoolId = ? AND a.gradeID = ? AND a.classID = ? GROUP BY a.quotaName 

#\uFFFD\uFFFD\uFFFD\u0770\u0F36id\uFFFD\uFFFD\u0467\u0423id\uFFFD\uFFFD\u0221\uFFFD\uFFFD\u02B7\uFFFD\uFFFD\u00BC\uFFFD\uFFFD\u02B1\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD
sql.school.getFiveClassHistoryDataByDateAndClassIdInspire = SELECT a.creationTime AS createdTime,a.teacherName,a.schoolID,a.gradeID,a.classID,a.gradeName,a.className,LEFT(a.creationTime,10) AS creationTime,a.quotaName, SUM(quotaPoint) AS quotaPoint,a.studentName,b.quotaOperType FROM TInspire a \
                                                            LEFT JOIN TInspireQuota b ON a.quotaId = b.id where LEFT(a.creationTime,10) BETWEEN ? AND ? AND b.relation = 1 AND a.schoolId = ? AND a.gradeID = ? AND a.classID = ? \
                                                            GROUP BY LEFT(a.creationTime,10),a.studentName,a.quotaName ORDER BY LEFT(a.creationTime,10)

#\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u06BA\uFFFD\uFFFD\uAF36\uFFFD\uFFFD\uFFFD\uFFFD\u046F\uFFFD\uFFFD\u02B1\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u05BF\u06FC\uFFFD\uFFFD\uFFFD
sql.school.getFiveClassHistoryDataByGradeIdsInspire = SELECT a.creationTime AS createdTime,a.teacherName,a.schoolID,a.gradeID,a.classID,a.gradeName,a.className,LEFT(a.creationTime,10) AS creationTime,a.quotaName, -1*sum(if(b.quotaOperType=1,a.quotaPoint,-1*a.quotaPoint))quotaPoint,a.studentName,\
                                                            b.quotaOperType FROM TInspire a LEFT JOIN TInspireQuota b ON a.quotaId = b.id where LEFT(a.creationTime,10) BETWEEN ? AND ? AND b.relation = 1 AND a.schoolId = ? AND a.gradeID in (?) \
                                                            GROUP BY a.gradeID,a.classID ORDER BY quotaPoint DESCseq  

#\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u0223\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u0F36\uFFFD\uFFFD\u04FC\uFFFD\u02B1\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD \uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u04B3 \u05B8\uFFFD\uFFFD\u0524\uFFFD\uFFFD
sql.school.getFiveClassEarlyWarningBySchoolIdAndTermIdInspire = SELECT b.sort,a.schoolID,a.gradeID,a.classID,a.gradeName,a.className,LEFT(a.creationTime,10) AS creationTime,a.quotaName,quotaPoint,b.quotaOperType FROM TInspire a \
LEFT JOIN TInspireQuota b ON a.quotaId = b.id \
where b.relation = 1 AND a.schoolId = ? AND a.termId = ?

#\uFFFD\uEDAF\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u043C\uFFFD\u02B1\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD
sql.school.getFiveClassEarlyWarningBySchoolIdInspire = SELECT b.sort,a.teacherName AS appraiserName,a.schoolID,a.gradeID,a.classID,a.gradeName,a.className,LEFT(a.creationTime,10) AS appraisalDate,a.creationTime AS createdTime,a.quotaName AS logogram,quotaPoint AS score,b.quotaOperType FROM TInspire a \
LEFT JOIN TInspireQuota b ON a.quotaId = b.id \
where b.relation = 1 AND a.schoolId = ? AND a.classID = ? AND LEFT(a.creationTime,10) BETWEEN ? AND ?


#\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u0423\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u03B3\uFFFD\uFFFD\uFFFD\u05B8\uFFFD\uFFFD\u0524\uFFFD\uFFFD
sql.school.getFiveClassEarlyWarningBySchoolIdAndTermIdInspireNew = SELECT b.sort,a.schoolID,a.gradeID,a.classID,a.gradeName,a.className,LEFT(a.creationTime,10) AS creationTime,a.quotaName,SUM(quotaPoint) AS quotaPoint,b.quotaOperType FROM TInspire a \
LEFT JOIN TInspireQuota b ON a.quotaId = b.id \
where b.relation = 1 AND b.quotaOperType = 0 AND a.schoolId = ? AND a.termId = ?

#\uFFFD\uFFFD\u03B3\uFFFD\uFFFD\uFFFD\u04B3\uFFFD\u0435\u0130\u0F36\u0524\uFFFD\uFFFD\u05BB\uFFFD\u043C\uFFFD\u02B1\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u05BF\u06FC\uFFFD\uFFFD\uFFFD
sql.school.getFiveClassEarlyWarningBySchoolIdAndTermIdInspire1 = SELECT b.sort,a.schoolID,a.gradeID,a.classID,a.gradeName,a.className,LEFT(a.creationTime,10) AS creationTime,a.quotaName,SUM(quotaPoint) AS quotaPoint,b.quotaOperType FROM TInspire a \
LEFT JOIN TInspireQuota b ON a.quotaId = b.id \
where b.relation = 1 AND a.schoolId = ? AND a.termId = ? AND gradeID = ? AND b.quotaOperType = 0 GROUP BY classID

#\uFFFD\uFFFD\u03F8\uFFFD\uFFFD\uFFFD\uFFFD\u0123\uFFFD\uFFFD\uFFFD\u0438\uFFFD\uFFFD\uFFFD\u02B1\uFFFD\uFFFD\u03B2\uFFFD\u046F\uFFFD\uFFFD\u02B1\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD
sql.school.getSsoInspire = SELECT SUM(quotaPoint) AS quotaPoint,sort,schoolId,gradeID,classID,gradeName,className,studentName,studentId,quotaId,creationTime,quotaName,quotaOperType \
                           FROM (SELECT b.sort,a.schoolID,a.gradeID,a.classID,a.gradeName,a.className,a.studentName,a.studentId,a.quotaId,\
                           LEFT(a.creationTime,10) AS creationTime,a.quotaName,a.quotaPoint,b.quotaOperType FROM TInspire a \
                           LEFT JOIN TInspireQuota b ON a.quotaId = b.id \
                           where b.relation = 1 AND a.schoolId = ? AND a.gradeID = ? AND a.classID = ? AND LEFT(a.creationTime,10) >= ? AND LEFT(a.creationTime,10) <= ?) AS c \
                           GROUP BY c.schoolId,c.gradeID,c.classID,c.studentId,c.creationTime,c.quotaId

#\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u0223\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u0F36\uFFFD\uFFFD\u04FC\uFFFD\u02B1\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD \uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u04B3 \uFFFD\u0F36\u0524\uFFFD\uFFFD
sql.school.getFiveClassEarlyWarningByDateInspire = SELECT a.schoolID,a.gradeID,a.classID,a.gradeName,a.className,LEFT(a.creationTime,10) AS creationTime,a.quotaName,quotaPoint,b.quotaOperType FROM TInspire a \
LEFT JOIN TInspireQuota b ON a.quotaId = b.id \
where LEFT(a.creationTime,10) BETWEEN ? AND ? AND b.relation = 1 AND a.schoolId = ? AND a.termId = ?

#----------- \u5B66\u751F\u4EFB\u52A1 -------------------------
#\u6DFB\u52A0\u5B66\u751F\u4EFB\u52A1
sql.school.scheduler.addStudentTask = INSERT INTO TStudentTaskList SET schoolID=?,gradeID=?,classID=?,studentID=?,studentNumber=?,studentName=?,type=?,typeRemark=?,level=?,operId=?,operNickName=?,\
  startTime=?,endTime=?,fromId=?,creator=0,creatorName="\u7CFB\u7EDF",creationTime=NOW()
#\u901A\u8FC7\u6765\u6E90id\u548C\u7C7B\u578B\u67E5\u8BE2\u5B66\u751F\u4EFB\u52A1
sql.school.getMyTaskByTypeAndFromId = SELECT * FROM TStudentTaskList WHERE schoolID=? AND studentID=? AND fromId=? AND type=?

#\u901A\u8FC7\u7C7B\u578B\u67E5\u8BE2\u5B66\u751F\u4EFB\u52A1
sql.school.getMyTaskByType = \
  SELECT a.id,a.schoolID,a.gradeID,a.classID,a.studentID,a.studentNumber,a.studentName,a.type,a.typeRemark,a.level,a.operId,a.operNickName,a.isComplete, \
  DATE_FORMAT(a.startTime, '%Y-%m-%d') AS startTime,DATE_FORMAT(a.endTime, '%Y-%m-%d') AS endTime, \
  a.fromId,a.creator,a.creatorName,a.creationTime,a.modifier,a.modificationTime,a.modifierName,a.taskTitle,a.taskContent,a.taskId \
  FROM school.TStudentTaskList a \
  WHERE a.schoolID = ? AND a.studentID = ? AND a.type = ? AND a.isComplete = 0 AND a.endTime >= CURDATE()

#\u901A\u8FC7id\u66F4\u6539\u5B66\u751F\u4EFB\u52A1\u5217\u8868\u72B6\u6001
sql.school.updateStudentTaskListById = update TStudentTaskList set isComplete=1 WHERE id=?

#----------- \u4E94\u9879\u8BC4\u6BD4 -------------------------
#\u83B7\u53D6\u5B66\u751F\u73ED\u7EA7\u8363\u8A89\u5934\u8854
sql.school.getFiveEvaluationBySchoolId = SELECT t.name,t.minValue,t.maxValue FROM TFiveEvaluationHonor t WHERE statusId=1 AND schoolId = ?

#----------- \u8BFE\u5802\u8868\u73B0 -------------------------
#\u83B7\u53D6\u5B66\u751F\u8BFE\u5802\u8868\u626C/\u6539\u8FDB\u6570\u91CF(typeValue:0\u6539\u8FDB,1\u8868\u626C)
sql.school.getMyPraiseToday = SELECT COUNT(*) FROM TClassQuotaResut WHERE beEvaluatedId=? AND schoolId=? AND typeValue=? AND appraisalTime<=(DATE_FORMAT(NOW(),'%Y-%m-%d')) AND appraisalTime>=(SELECT CAST(CAST(SYSDATE() AS DATE) AS DATETIME))

#----------- \u8DD1\u6279\u4EFB\u52A1 -------------------------
#\u8003\u8BD5\u6210\u7EE9\u6279\u5904\u7406\u72B6\u6001\u4E3A\u590D\u4F4D
sql.school.updateExamTimeTask = UPDATE TTimingTask SET examTaskStatus = 0, examTaskCreationTime = CURDATE() - 1

#\u6FC0\u52B1\u5361\u6279\u5904\u7406\u72B6\u6001\u4E3A\u590D\u4F4D
sql.school.updateCardTimeTask = UPDATE TTimingTask SET cardTaskStatus = 0, creationTime = CURDATE() - 1

#\u83B7\u53D6\u5B66\u6821\u7684\u5E74\u6BB5\u6570\u636E (\u6559\u52A1\u5904\u9996\u9875)
sql.exam.getGradeDataById = SELECT id,name,type,typeName,schoolName,sort from TGrade where schoolId = ? ORDER BY sort
#\u83B7\u53D6\u5E74\u6BB5\u6240\u6709\u7684\u8003\u8BD5\u7C7B\u578B (\u6559\u52A1\u5904\u9996\u9875)
sql.exam.getGradeExamByGradeId = SELECT id,schoolName,gradeId,gradeName,subjectId,subjectName,isSysSubject from TGradeSubject WHERE gradeId=? and schoolId=? 
#\u67E5\u8BE2\u5B66\u6821typeId
sql.school.getSchoolTypeId = Select type,typeName from TSchool where id = ?


sql.school.yearTerm.getOldTermListBySchoolId=SELECT id,schoolYearId,schoolYearName,name,value,startDate,endDate,flag FROM TTerm WHERE schoolId = ? AND SYSDATE()>startDate

sql.school.gradeClass.queryGradeByGradeName=SELECT * FROM TGrade WHERE schoolId = ? AND name = ?

sql.school.gradeClass.queryClassByClassName=SELECT * FROM TClass WHERE schoolId = ? AND gradeName = ? AND name = ?

#\u67E5\u627E\u5B66\u6821\u5B66\u751F\u6570\u636E
sql.school.getStudentDataBySchoolId = SELECT uid,userName,gradeId,classID from TStudent where schoolID=?
#\u6839\u636E\u5B66\u751FID\u66F4\u6539\u5B66\u751F\u79EF\u5206\u73ED\u7EA7\u6570\u636E
sql.school.updateStudentPointData = UPDATE TScoreCount SET gradeID = ?,classID = ? WHERE studentID = ? 


sql.school.teacherLogin.changeLoginStatus=UPDATE TTeacherLogin SET status=? WHERE id=?
#\u67E5\u8BE2\u73ED\u7EA7\u5B66\u751F\u5269\u4F59\u79EF\u5206\u5217\u8868\u2014\u2014\u73ED\u4E3B\u4EFB\u7AEF
sql.school.getClassBonusPointByKey1 = \
SELECT \
  student.uid AS studentId, \
  student.userName AS studentName, \
  student.studentNumber AS studentNumber, \
  student.pinyin as pinyin, \
  ifnull(c.score, 0) AS bonusPoint, \
  c.type,c.typeRemark,student.gradeName,student.className \
  FROM person.TStudent student \
   LEFT JOIN school.TScoreCount c ON student.uid = c.studentID \
  AND student.schoolID = c.schoolID \
  AND student.gradeId = c.gradeId \
  AND student.classID = c.classID \
  AND c.type = 0 \
  WHERE \
   ( \
  UPPER(student.pinyin) LIKE UPPER( ? ) \
   OR UPPER(student.initials) LIKE UPPER( ? ) \
   OR UPPER(student.studentNumber) LIKE UPPER( ? ) \
   OR UPPER(student.userName) LIKE UPPER( ? ) \
  ) \
  AND student.schoolID = ? 

#\u67E5\u8BE2\u73ED\u7EA7\u5B66\u751F\u83B7\u5F97\u79EF\u5206\u5217\u8868\u2014\u2014\u73ED\u4E3B\u4EFB\u7AEF
sql.school.getClassBonusPointByKey2 = SELECT ifnull(SUM(c.`score`),0) as huode ,student.uid AS \
  studentId,student.userName AS studentName,student.studentNumber AS studentNumber \
  FROM person.TStudent student LEFT JOIN school.TScoreCount c ON student.uid = c.studentID AND \
  student.schoolID = c.schoolID AND student.gradeId = c.gradeId \
  AND student.classID = c.classID And c.score >=0 And c.type !=0 WHERE ( UPPER(student.pinyin) LIKE UPPER( ? ) \
  OR UPPER(student.initials) LIKE UPPER( ? ) \
  OR UPPER(student.studentNumber) LIKE UPPER( ? ) \
  OR UPPER(student.userName) LIKE UPPER( ? ) ) AND student.schoolID = ?  
#\u67E5\u8BE2\u73ED\u7EA7\u5B66\u751F\u4F7F\u7528\u79EF\u5206\u5217\u8868\u2014\u2014\u73ED\u4E3B\u4EFB\u7AEF
sql.school.getClassBonusPointByKey3 = SELECT ifnull(SUM(c.`score`),0) as shengyu ,student.uid AS \
  studentId,student.userName AS studentName,student.studentNumber AS studentNumber \
  FROM person.TStudent student LEFT JOIN school.TScoreCount c ON student.uid = c.studentID AND \
  student.schoolID = c.schoolID AND student.gradeId = c.gradeId \
  AND student.classID = c.classID And c.score <=0 And c.type !=0 WHERE ( UPPER(student.pinyin) LIKE UPPER( ? ) \
  OR UPPER(student.initials) LIKE UPPER( ? ) \
  OR UPPER(student.studentNumber) LIKE UPPER( ? ) \
  OR UPPER(student.userName) LIKE UPPER( ? ) ) AND student.schoolID = ?  
#\u67E5\u8BE2\u5168\u6821\u5B66\u751F\u5269\u4F59\u79EF\u5206\u5217\u8868\u2014\u2014\u6821\u957F\u7AEF
sql.school.getClassBonusPointBySchool = SELECT student.uid AS studentId,student.userName AS studentName,student.studentNumber AS studentNumber,\
  student.pinyin as pinyin,ifnull(c.score, 0) AS bonusPoint,c.type,c.typeRemark,student.gradeName,student.className,c.gradeID,c.classID FROM person.TStudent student \
  LEFT JOIN school.TScoreCount c ON student.uid = c.studentID AND student.schoolID = c.schoolID AND c.type =0  WHERE 
#\u67E5\u8BE2\u5168\u6821\u5B66\u751F\u83B7\u5F97\u79EF\u5206\u5217\u8868\u2014\u2014\u6821\u957F\u7AEF
sql.school.getClassBonusPointBySchool1 = SELECT ifnull(SUM(c.`score`), 0) as huode,student.uid AS studentId,student.userName AS studentName,\
  student.studentNumber AS studentNumber FROM person.TStudent student LEFT JOIN school.TScoreCount c ON student.uid= c.studentID \
  AND student.schoolID= c.schoolID AND student.gradeId= c.gradeId AND student.classID= c.classID And c.score>= 0 And c.type!= 0 WHERE 
#\u67E5\u8BE2\u5168\u6821\u5B66\u751F\u4F7F\u7528\u79EF\u5206\u5217\u8868\u2014\u2014\u6821\u957F\u7AEF
sql.school.getClassBonusPointBySchool2 = SELECT ifnull(SUM(c.`score`), 0) as shengyu,student.uid AS studentId,student.userName AS studentName,\
  student.studentNumber AS studentNumber FROM person.TStudent student LEFT JOIN school.TScoreCount c ON student.uid= c.studentID \
  AND student.schoolID= c.schoolID AND student.gradeId= c.gradeId AND student.classID= c.classID And c.score<= 0 And c.type!= 0 WHERE
#\u67E5\u8BE2\u5168\u6821\u5B66\u751F\u4F7F\u7528\u79EF\u5206\u5217\u8868\u2014\u2014\u6821\u957F\u7AEF(\u5408\u8D77\u6765\u5199)
sql.school.getClassBonusPointBySchoolNew = select d.studentId,d.studentName,d.studentNumber,d.pinyin,d.initials,d.bonusPoint,d.type,d.typeRemark,d.gradeName,d.className,d.gradeID,d.classID,e.huode,f.shengyu from \
  (SELECT \
     student.uid AS studentId, \
     student.userName AS studentName, \
     student.studentNumber AS studentNumber, \
     student.pinyin AS pinyin, \
  	  student.initials as initials, \
     ifnull(c.score, 0) AS bonusPoint, \
     c.type, \
     c.typeRemark, \
     student.gradeName, \
     student.className, \
     student.gradeId as gradeID, \
     student.classID \
     FROM \
     person.TStudent student \
     LEFT JOIN school.TScoreCount c ON student.uid = c.studentID \
  AND student.schoolID = c.schoolID \
  AND c.type = 0 \
  WHERE \
  student.schoolID = ? \
  AND student. STATUS = 1) d \
  left join \
  (SELECT \
     ifnull(SUM(c.score), 0) AS huode, \
     student.uid AS studentId, \
     student.userName AS studentName, \
     student.studentNumber AS studentNumber \
     FROM \
     person.TStudent student \
     LEFT JOIN school.TScoreCount c ON student.uid = c.studentID \
     AND student.schoolID = c.schoolID \
     AND c.score >= 0 \
     AND c.type != 0 \
     WHERE \
     student.schoolID:: \
     AND student. STATUS = 1 \
     GROUP BY \
     studentID) e \
  on d.studentId = e.studentId left join \
   (SELECT \
      ifnull(SUM(c.score), 0) AS shengyu, \
      student.uid AS studentId, \
      student.userName AS studentName, \
      student.studentNumber AS studentNumber \
      FROM \
      person.TStudent student \
      LEFT JOIN school.TScoreCount c ON student.uid = c.studentID \
      AND student.schoolID = c.schoolID \
      AND c.score <= 0 \
      AND c.type != 0 \
      WHERE \
      student.schoolID:: \
      AND student. STATUS = 1 \
      GROUP BY \
      studentID) f \
  on e.studentId = f.studentId 

#\u67E5\u8BE2\u672C\u65E5\u4E2A\u4EBA\u5B66\u751F\u79EF\u5206\u660E\u7EC6\u6E05\u5355
sql.school.getStudentScoreDetailByStudentId = SELECT studentID as studentId,studentName,studentNumber,type,typeRemark,DATE_FORMAT(creationTime,'%Y-%m-%d') as creationTime,score,scoreName \
  FROM TScoreList WHERE studentID= ? AND creationTime >= (DATE_FORMAT(now(),'%Y-%m-%d')) 
#\u6839\u636E\u6761\u4EF6\u67E5\u8BE2\u5B66\u751F\u4E2A\u4EBA\u79EF\u5206\u660E\u7EC6\u6E05\u5355
sql.school.getStudentScoreDetailMoreByStudentId = SELECT studentID as studentId,studentName,studentNumber,type,typeRemark,\
  DATE_FORMAT(creationTime, '%Y-%m-%d') as creationTime,score,scoreName FROM TScoreList WHERE studentID= ?
#\u67E5\u8BE2\u5B66\u751F\u79EF\u5206\u660E\u7EC6\u6E05\u5355
sql.school.getStudentScoreDetailByClassId = SELECT studentID as studentId,studentName,studentNumber,type,typeRemark,DATE_FORMAT(creationTime,'%Y-%m-%d') as creationTime,score,scoreName \
  FROM TScoreList WHERE classID=? 
#\u6839\u636E\u6761\u4EF6\u67E5\u8BE2\u5B66\u751F\u79EF\u5206\u660E\u7EC6\u6E05\u5355
sql.school.getStudentScoreDetailMoreByClassId = SELECT studentID as studentId,studentName,studentNumber,type,typeRemark,\
  DATE_FORMAT(creationTime, '%Y-%m-%d') as creationTime,score,scoreName FROM TScoreList WHERE classID= ?
#\u83B7\u53D6\u5B66\u5E74\u6BB5\u6570\u636E
sql.exam.getGradeDataBygradeId = SELECT id,name,type,typeName,schoolName,sort from TGrade where id = ? 

sql.school.gradeClass.queryClassInfo=SELECT gradeName,`name` FROM TClass WHERE schoolId=? AND gradeId=? AND id=?

sql.school.teacherRole.queryTeacherByRoleIdsql=SELECT \
t1.id, \
t1.roleCode, \
t1.roleName, \
t1.teacherID, \
t1.teacherName, \
t2.staffNumber \
FROM \
TTeacherRole t1, \
TTeacher t2 \
WHERE \
t1.teacherID = t2.id \
AND t2.schoolID = ? And t1.roleCode=?


sql.school.teacherRole.queryNotInRoleTeacherByRoleIdsql=SELECT  id,\
realName, \
staffNumber \
FROM \
TTeacher \
WHERE \
schoolID = ? \
AND id NOT IN ( \
SELECT \
teacherID \
FROM \
TTeacherRole \
WHERE \
roleCode = ? )

sql.school.teacherRole.deleteTeacherRoleByRoleIdSql=DELETE FROM TTeacherRole WHERE id=?

#\u67E5\u8BE2\u5B66\u751F\u804C\u52A1\u6570\u636E
sql.studentPosition.getStudentPosition = select id,schoolId,name from TStudentPosition \
  where schoolId = ? and status=1 
#\u6DFB\u52A0\u5B66\u751F\u804C\u52A1\u6570\u636E
sql.studentPosition.addStudentPosition = insert into TStudentPosition (schoolId,name,status,creator,creationTime,creatorName) values (?,?,1,?,now(),?)
#\u4FEE\u6539\u5B66\u751F\u804C\u52A1\u6570\u636E
sql.studentPosition.updateStudentPosition = update TStudentPosition set name=?,modifier=?,modifyTime=now(),modifierName=? where id = ?
#\u4FEE\u6539\u64CD\u4F5C\u5173\u8054\u5B66\u751F\u804C\u52A1\u6570\u636E
sql.studentPosition.linkUpdateStudentPosition = update TStudent set position=? where positionId=?
#\u5220\u9664\u64CD\u4F5C\u5173\u8054\u67E5\u8BE2\u5B66\u751F\u804C\u52A1\u6570\u636E
sql.studentPosition.linkGetStudentPosition = select positionId from TStudent where positionId=?
#\u5220\u9664\u5B66\u751F\u804C\u52A1\u6570\u636E
sql.studentPosition.deleteStudentPosition = update TStudentPosition set status=0,modifier=?,modifyTime=now(),modifierName=? where id = ?
#\u8BBE\u7F6E\u5B66\u751F\u804C\u52A1
sql.studentPosition.setStudentPositionByStudentId = update TStudent set positionId=?,position=?,modifyTime=now() where uid = ?
#\u67E5\u8BE2\u6539\u5B66\u6821\u662F\u5426\u5DF2\u5B58\u5728\u8BE5\u5B66\u751F\u804C\u52A1\u540D\u79F0
sql.studentPosition.getStudentPositionByNameAndSchoolId = select name from TStudentPosition where name=? and schoolId=? and status=1

#\u67E5\u8BE2\u5B66\u6821\u4FE1\u606F
sql.school.querySchoolInfo=Select id,name,typeName,managerName,managerPhone,provinceName,areaName,cityName,area,tryStatus,versionId,versionName,areaRelationship from TSchool WHERE 1=1

#\u6839\u636E\u5B66\u671Fid\u548C\u73ED\u4E3B\u4EFBid\u83B7\u53D6\u5386\u53F2\u73ED\u7EA7\u4FE1\u606F
sql.school.getGradeAndClassResultFromOld = select gradeId,classId from TStudentOldData where schoolYearId = ? and teacherId = ? limit 1

#\u6839\u636E\u5B66\u6821id,\u5B66\u751Fid\uFF0C\u5B66\u671Fid\u67E5\u8BE2\u56FD\u5BB6\u8FD0\u52A8\u5458\u7B49\u7EA7
sql.school.getAthleteLevelById = SELECT studentName,honorCategory,selectionUnit,creatorName from THonor WHERE (honorCategory="\u4E8C\u7EA7\u8FD0\u52A8\u5458" or honorCategory="\u4E00\u7EA7\u8FD0\u52A8\u5458") and schoolID=? and studentID=? and termId=?
#\u6839\u636Eid\u67E5\u8BE2\u5B66\u6821\u4FE1\u606F
sql.school.account.querySchoolById=SELECT \
id, \
name, \
type, \
typeName, \
managerName, \
managerEmail, \
managerPhone, \
managerQQ, \
provinceName, \
province, \
cityName, \
city, \
areaName, \
area, \
tryStatus, \
officialSeal,\
TO_DAYS(NOW()) AS num2,TO_DAYS(tryEndTime)+1 AS num1, \
DATE_FORMAT(tryEndTime, '%Y-%m-%d') AS endDate, \
areaRelationship \
FROM \
TSchool \
WHERE \
id = ?


#\u4FEE\u6539\u5B66\u6821\u4FE1\u606F(\u8BD5\u7528)
sql.school.updateTrySchool=UPDATE TSchool SET type=?,typeName=?,managerName = ?,managerPhone = ?,managerEmail= ?,managerQQ = ?,modifier = ?,modifierName = ?, modifyTime = NOW(),provinceName = ?, \
province = ?,cityName = ?,city = ?,areaName = ?,area = ?,tryEndTime = ?,tryStatus = ?,versionId = ?,versionName = ?,areaRelationship=? WHERE id = ?

#\u4FEE\u6539\u5B66\u6821\u7C7B\u578B\u4FE1\u606F\uFF08TGrade\u8868\uFF09
sql.person.trySchool.updateTGrade=UPDATE TGrade SET schoolType = ?,schoolTypeName = ?  WHERE schoolId = ?

#\u6839\u636E\u5B66\u6821id\u67E5\u8BE2\u7EC4\u7EC7\u6839\u8282\u70B9\u4FE1\u606F
sql.school.account.queryOrganization=SELECT id,name FROM TOrganization WHERE schoolID = ? AND ptree = 0 AND ptree = 0 AND pname = '\u6839\u8282\u70B9'

#\u67E5\u8BE2\u64CD\u4F5C\u65E5\u5FD7
sql.operationLog.queryOperationLogInfo=SELECT id,schoolName,content,creatorName,DATE_FORMAT(creationTime, '%Y-%m-%d') AS creationTime FROM TOperationLog 

#\u67E5\u8BE2\u8BF7\u5047\u5B66\u751F\u4FE1\u606F
sql.school.getLeaveStudentByClassId = SELECT a.studentId,a.studentName,a.studentNumber,a.type,a.startDate,a.startTime,a.endDate,a.endTime,b.seat \
  FROM TAttendance a LEFT JOIN person.TStudent b on a.studentId = b.uid WHERE a.classId = ? AND a.STATUS = 1 AND curdate()  <= a.endDate group by a.studentId


#\u65B0\u589E\u64CD\u4F5C\u65E5\u5FD7
sql.operationLog.insertOperationLog=INSERT INTO TOperationLog(schoolId,schoolName,content,creator,creatorName,creationTime) VALUE(?,?,?,?,?,NOW())

#\u03A5\uFFFD\uFFFD\u03A5\uFFFD\u0379\uFFFD\uFFFD\uFFFD\uFFFD\u00BC\uFFFD\uFFFD\uBF34\u02B1\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u03A5\uFFFD\uFFFD\u03A5\uFFFD\u037C\uFFFD\u00BC
sql.school.getInspireByConditions = SELECT c.name,a.quotaPoint,a.teacherName,a.schoolID,a.gradeID,a.classID,a.gradeName,a.className,\
                                    LEFT(a.creationTime,10) AS creationTime,a.quotaName,a.studentName,a.termID,\
                                    b.quotaOperType FROM TInspire a LEFT JOIN TInspireQuota b ON a.quotaId = b.id LEFT JOIN TTerm c ON c.id = a.termId \
                                    where  b.relation = 1 AND b.quotaOperType = 0 AND a.schoolId = ? AND a.termId = ? ORDER  BY creationTime DESC


#\u83B7\u53D6\u5F97\u5206\u60C5\u51B5
sql.school.queryScoreListByCirclIdSql=SELECT * FROM TScoreList WHERE 1=1
#\u5220\u9664\u5F97\u5206\u60C5\u51B5
sql.school.deleteScoreListByIdSql=DELETE FROM TScoreList WHERE id = ?
#\u83B7\u53D6\u5199\u5B9E\u4FE1\u606F
sql.school.queryCircleInfoByIdSql=SELECT t1.*,t2.studentNumber,t2.userName FROM circle.TCircle t1,person.TStudent t2 WHERE  t1.studentPersonId=t2.uid  AND t1.id = ?
#\u83B7\u53D6\u5199\u5B9E\u4EFB\u52A1\u4FE1\u606F
sql.school.queryCircleTaskByIdSql=SELECT * FROM circle.TCircleTask WHERE id = ?
#\u5199\u5B9E\u6DFB\u52A0\u79EF\u5206
sql.school.insertScoreListByCircleSql=INSERT INTO TScoreList ( \
schoolID,\
studentID,\
gradeID,\
classID,\
studentNumber,\
studentName,\
type,\
typeRemark,\
content,\
score,\
scoreName,\
operId,\
operNickName,\
creator,\
creatorName,\
creationTime,\
circleId,\
circleTaskId \
) \
VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?, NOW(),?,?)

#\u83B7\u53D6\u5E74\u7EA7\u4FE1\u606F
sql.school.gradeClass.getGradeInfoById=SELECT * FROM TGrade WHERE schoolId = ? AND id = ? 

#\u6839\u636Egrade\u548C\u5B66\u6821id\u83B7\u5F97termId
sql.school.queryTermIdBySchoolIdAndGrade = select termId from TGradeTermMapping where schoolId = ? and grade = ?

#\u6839\u636Euid\u548CschoolYearId\u83B7\u5F97\u5B66\u751F\u4FE1\u606F
sql.school.queryStudentInfoByStuNOAndTermId = select classId,gradeId from TStudentOldData where studentId = ? and schoolYearId = ?

#\u6839\u636E\u4E3B\u952Eid\u67E5\u8BE2\u5B66\u5E74id
sql.school.queryCurrentSchoolYearIdByTermId = select schoolYearId,schoolYearName from TTerm where id = ?

#\u67E5\u8BE2\u7CFB\u7EDF\u79D1\u76EE\u5217\u8868
sql.school.subject.getSysSubjectList = SELECT juniorSubjectType,juniorSubjectTypeName,id,name,hasPrimary,hasJunior,hasSenior from TSystemSubject order by juniorSubjectType
#\u6839\u636EclassID\u83B7\u5F97\u73ED\u4E3B\u4EFB\u4FE1\u606F
sql.school.gradeClass.getTeacherDataById = SELECT classManagerId,classManagerName from TClass where id = ?
#\u6839\u636ETeacherID\u83B7\u5F97\u73ED\u4E3B\u4EFB\u7B7E\u540D\u6570\u636E
sql.school.gradeClass.getTeacherSignatureById = SELECT schoolId,schoolName,realName,signature from TTeacher where id = ?
#\u67E5\u8BE2\u7248\u672C\uFF08\u533A\u53BF\uFF09
sql.school.queryRoleForNew = select code,name from TRoleForNew

#---------------------\u533A\u53BF\u7AEFsql-----Start----------------------
#\u67E5\u8BE2\u533A\u57DF\u6240\u6709\u7C7B\u522B\u5B66\u6821\u6570\u91CF
sql.school.region.getSchoolTypeNumberByAreaId = SELECT COUNT(type) as number,type,typeName from TSchool where area = ? and status = 1 GROUP BY type
#\u67E5\u8BE2\u533A\u57DF\u5185\u6240\u6709\u5B66\u6821ID
sql.school.region.getSchoolDataByAreaId = SELECT id,type,typeName from TSchool where area = ? and status = 1
#\u67E5\u8BE2\u533A\u57DF\u6240\u6709\u7C7B\u522B\u5B66\u6821\u7684\u5B66\u751F\u4EBA\u6570
sql.school.region.getStudentNumberBySchoolType = SELECT COUNT(a.uid) as studentNumber,b.type,b.typeName from person.TStudent as a \
   JOIN TSchool as b ON a.schoolID=b.id where FIND_IN_SET(a.schoolID,?) and a.status=1 and a.gradeId is not null GROUP BY b.type
#\u67E5\u8BE2\u533A\u57DF\u6240\u6709\u7C7B\u522B\u5B66\u6821\u7684\u6559\u5E08\u4EBA\u6570
sql.school.region.getTeacherNumberBySchoolType = SELECT COUNT(a.id) as teacherNumber,b.type,b.typeName from person.TTeacher as a \
   JOIN TSchool as b ON a.schoolID=b.id where FIND_IN_SET(a.schoolID,?) and a.status=1 GROUP BY b.type
#\u6839\u636E\u5B66\u671FId,\u5B66\u6821\u7C7B\u522B \u67E5\u8BE2\u533A\u57DF\u6240\u6709\u7C7B\u522B\u5B66\u6821\u7684\u6C11\u4E3B\u8BC4\u4EF7\u5B66\u751F\u4EBA\u6570
sql.school.region.getDemocraticStudentNumberByTermId = SELECT COUNT(a.id) as number,a.levelTotal from democraticEvaluation.TDemocraticScore a \
  JOIN TSchool b ON a.schoolId = b.id where FIND_IN_SET(a.schoolID,?) AND a.termId=? GROUP BY a.levelTotal

#\u6839\u67E5\u8BE2\u533A\u57DF\u6240\u6709\u7C7B\u522B\u5B66\u6821\u7684\u6C11\u4E3B\u8BC4\u4EF7\u5B66\u751F\u4EBA\u6570
sql.school.region.getDemocraticStudentNumberBySchoolType = SELECT COUNT(DISTINCT beEvaluatedId) as number from democraticEvaluation.TDemocraticScore where activityId in (:ids)

#///////////////////////cj ///////////////////
#\u67E5\u8BE2\u533A\u53BF\u6240\u6709\u6240\u6709\u7C7B\u522B\u5B66\u6821\u6570\u91CF\u53CA\u76F8\u5BF9\u5B66\u6821\u4FE1\u606F
sql.school.region.getSchoolByAreaIdAndTypeIdSql=SELECT *  FROM TSchool  WHERE area = ? AND type = ?

#\u67E5\u8BE2\u5B66\u6821\u4FE1\u606F
sql.school.region.querySchoolByAreaIdAndNameSql=SELECT *  FROM TSchool  WHERE area = ? AND status = 1

#\u83B7\u53D6\u5B66\u6821\u4FE1\u606F\uFF08\u5B66\u751F\u6570\u91CF\u3001\u6559\u5E08\u6570\u91CF\uFF09
sql.school.region.getDetailSchoolInfoSql=SELECT t1.id,t1.`name`,t1.provinceName,t1.cityName,t1.areaName,\
(SELECT COUNT(DISTINCT t2.id) FROM person.TTeacher t2  WHERE t2.`status` = 1 AND t2.schoolID = t1.id ) AS teacherNum,\
(SELECT COUNT(DISTINCT t4.uid) FROM person.TStudent t4 WHERE t1.id=t4.schoolID AND t4.`status` = 1 AND t4.gradeId IS NOT NULL) AS studentNum ,\
(SELECT COUNT(DISTINCT t5.id) FROM TClass t5 WHERE t5.schoolId = t1.id AND t5.`status` = 1  ) AS classNum \
FROM TSchool t1 WHERE t1.id = ?

#\u67E5\u8BE2\u6559\u5E08\u4FE1\u606F
sql.school.region.queryTeacherListBySchoolIdSql=\
 SELECT \
       t3.*, \
       ROUND( avg( t6.score ), 1 ) AS avgScore \
 FROM \
     ( \
      SELECT \
          t1.id, \
          t1.staffNumber, \
          t1.realName, \
          t1.mobilephone, \
          t1.sex, \
          t2.subjectName, \
          t2.subjectId \
      FROM \
          person.TTeacher t1 \
      LEFT JOIN \
          TSubjectTeacher t2 \
      ON \
          t1.id = t2.teacherId \
      WHERE \
          t1.`status` = 1 AND t1.schoolID = ? \
     ) t3 \
 LEFT JOIN \
         ( \
          SELECT \
               t4.score, \
               t4.subjectId, \
               t4.teacherId \
          FROM \
               exam.TStudentAchievement t4 \
          JOIN \
               TTerm t5 \
          ON \
               t4.termId = t5.id \
          WHERE \
               t5.schoolID = ? AND t5.NAME = ?  AND t4.`examTypeName` LIKE '%\u671F\u672B%' \
          ) t6 \
 ON \
     t3.id = t6.teacherId  AND t3.subjectId = t6.subjectId 



#\u5B66\u5E74\u67E5\u8BE2
sql.school.region.querySchoolYearBySchoolIdSql=SELECT * FROM TSchoolYear WHERE id<=(SELECT id FROM TSchoolYear WHERE flag =1)

#\u67E5\u8BE2\u5B66\u751F\u4FE1\u606F(\u5206\u9875)
sql.school.region.queryStudentListBySchoolIdSql=SELECT DISTINCT a.uid,a.userName,a.studentNumber,a.position,a.schoolName,a.className,a.gradeName,a.sex,a.`status`,b.IDPhotoAddress,a.gradeId,a.classID,DATE_FORMAT(a.admissionTime,'%Y-%m-%d') as admissionTime  \
FROM person.TStudent a LEFT JOIN person.TStudentLogin b ON a.studentNumber = b.userName AND a.schoolID = b.schoolID \
AND b. STATUS = 1 WHERE a.schoolID = ? AND a.`status` = 1 AND a.gradeId IS NOT NULL

#\u67E5\u8BE2\u65E7\u5B66\u751F\u4FE1\u606F(\u5206\u9875)
sql.school.region.queryOldStudentListBySchoolIdSql=SELECT DISTINCT b.uid,b.userName,b.studentNumber,d.gradeName,d.`name` AS className,b.schoolName,b.sex,c.IDPhotoAddress,b.`status`,b.position,d.gradeId,d.id AS classID FROM \
TStudentOldData a LEFT JOIN person.TStudent b ON a.studentId = b.uid  \
LEFT JOIN person.TStudentLogin c ON b.studentNumber = c.userName AND b.schoolID = c.schoolID  \
LEFT JOIN TClass d ON a.classId = d.id  WHERE a.schoolYearId = ? AND a.schoolId = ? AND b.`status` = 1 

#\u67E5\u8BE2\u5BB6\u957F\u4FE1\u606F
sql.school.region.queryParentByStuIdSql=SELECT  a.*  FROM person.TParent a LEFT JOIN person.TParentStudentRelationship b ON a.id=b.parentId WHERE b.studentId = ? AND a.`status` = 1

#\u67E5\u8BE2\u5B66\u671F\u4FE1\u606F
sql.school.region.queryTermIdBySchoolIdAndYearIdSql=SELECT * FROM TTerm WHERE schoolId = ? AND schoolYearId = ?

#\u83B7\u53D6\u5E74\u7EA7\u5217\u8868\uFF08\u5B66\u751F\u4EBA\u6570,\u5BB6\u957F\u4EBA\u6570\uFF09
sql.school.region.queryGradeListBySchoolIdSql=SELECT a.`name`,a.id,(SELECT COUNT(DISTINCT b.uid ) FROM person.TStudent b WHERE a.id=b.gradeId AND b.`status` = 1  ) AS stuNum, \
(SELECT COUNT(DISTINCT t1.id) FROM person.TParent t1 LEFT JOIN person.TParentStudentRelationship t2 ON t1.id = t2.parentId \
LEFT JOIN person.TStudent t3 ON t2.studentId = t3.uid WHERE t1.`status` = '1' AND t3.gradeId = a.id  AND t3.gradeId IS NOT NULL \
AND t3.`status` = 1) AS parentNum FROM TGrade a WHERE schoolId = ?

#\u83B7\u53D6\u65E7\u5E74\u7EA7\u5217\u8868\uFF08\u5B66\u751F\u4EBA\u6570,\u5BB6\u957F\u4EBA\u6570\uFF09
sql.school.region.queryOldGradeListBySchoolIdSql= \
  SELECT \
      a.`name`, \
      a.id, \
      ( \
       SELECT \
            COUNT( DISTINCT b.id ) \
       FROM \
            TStudentOldData b \
       LEFT JOIN person.TStudent c ON b.studentId = c.uid \
       WHERE \
            a.id = b.gradeId AND b.schoolYearId = ? AND b.schoolId = ? AND c.`status` = 1 \
       ) AS stuNum , \
      ( \
       SELECT \
            COUNT( DISTINCT t1.id ) \
       FROM \
            person.TParent t1 \
       LEFT JOIN person.TParentStudentRelationship t2 ON t1.id = t2.parentId \
       LEFT JOIN school.TStudentOldData t3 ON t2.studentId = t3.studentId \
       WHERE \
            t1.`status` = '1' AND t3.gradeId = a.id AND t3.schoolYearID = ? AND t3.schoolId = ? AND t3.gradeId IS NOT NULL \
       ) as parentNum	\
 FROM \
     TGrade a \
 WHERE \
     a.schoolId = ?

#\u83B7\u53D6\u73ED\u7EA7\u5217\u8868\uFF08\u5B66\u751F\u4EBA\u6570\uFF0C\u5BB6\u957F\u4EBA\u6570\uFF09
sql.school.region.queryClassListBySchoolIdSql=SELECT a.id,a.`name`,(SELECT COUNT(DISTINCT b.uid ) FROM person.TStudent b WHERE a.id=b.classID AND b.`status` = 1 ) AS stuNum, \
(SELECT COUNT(DISTINCT t1.id) FROM person.TParent t1 LEFT JOIN person.TParentStudentRelationship t2 ON t1.id = t2.parentId \
LEFT JOIN person.TStudent t3 ON t2.studentId = t3.uid WHERE t1.`status` = '1' AND t3.classID = a.id \
AND t3.`status` = 1) AS parentNum  FROM TClass a WHERE a.schoolId= ? AND a.gradeId = ? 

#\u83B7\u53D6\u65E7\u73ED\u7EA7\u5217\u8868\uFF08\u5B66\u751F\u4EBA\u6570,\u5BB6\u957F\u4EBA\u6570\uFF09
sql.school.region.queryOldClassListBySchoolIdSql= \
 SELECT \
       a.`name`, \
       a.id, \
       ( \
        SELECT \
              COUNT( DISTINCT b.id ) \
        FROM \
              TStudentOldData b \
        LEFT JOIN person.TStudent c ON b.studentId = c.uid \
        WHERE \
              a.id = b.classId AND b.schoolYearId = ? AND b.schoolId = ? AND c.`status` = 1 \
       ) AS stuNum, \
       ( \
        SELECT \
              COUNT( DISTINCT t1.id ) \
        FROM \
              person.TParent t1 \
        LEFT JOIN person.TParentStudentRelationship t2 ON t1.id = t2.parentId \
        LEFT JOIN school.TStudentOldData t3 ON t2.studentId = t3.studentId \
        WHERE \
              t1.`status` = '1' AND t3.classID = a.id AND t3.schoolYearId = ? AND t3.schoolId = ? \
       ) AS parentNum \
  FROM \
      school.TClass a \
  WHERE \
      a.schoolId = ? AND a.gradeId = ?

#\u83B7\u53D6\u5B66\u751F\u4EBA\u6570
sql.school.region.getStudentNumBySchoolIdSql=SELECT COUNT(DISTINCT uid) FROM person.TStudent WHERE `status`=1 AND schoolID = ? AND gradeId IS NOT NULL

#\u83B7\u53D6\u5BB6\u957F\u4EBA\u6570
sql.school.region.getParentNumBySchoolIdSql=SELECT COUNT(DISTINCT t1.id) FROM person.TParent t1 LEFT JOIN person.TParentStudentRelationship t2 ON t1.id=t2.parentId \
LEFT JOIN person.TStudent t3 ON t2.studentId=t3.uid   \
WHERE t1.`status` = '1' AND t3.schoolID=?  AND t3.`status`=1 AND t3.gradeId IS NOT NULL

#\u67E5\u8BE2\u5BB6\u957F\u4FE1\u606F(\u5206\u9875)
sql.school.region.queryParentListBySchoolIdSql=SELECT DISTINCT t1.*,t4.IDPhotoAddress FROM \
person.TParent t1 LEFT JOIN person.TParentStudentRelationship t2 ON t1.id = t2.parentId \
LEFT JOIN person.TStudent t3 ON t2.studentId = t3.uid LEFT JOIN person.TParentLogin t4 ON t1.mobilephone = t4.userName  \
WHERE t1.`status` = '1' AND t3.schoolID=?  AND t3.`status` = '1' AND t3.gradeId IS NOT NULL

#\u67E5\u8BE2\u65E7\u5BB6\u957F\u4FE1\u606F(\u5206\u9875)
sql.school.region.queryOldParentListBySchoolIdSql=\
  SELECT \
       DISTINCT t3.*,t4.IDPhotoAddress \
  FROM \
       school.TStudentOldData t1 \
  LEFT JOIN \
       person.TParentStudentRelationship t2 \
  ON \
       t1.studentId = t2.studentId \
  LEFT JOIN \
       person.TParent t3 \
  ON \
       t2.parentId = t3.id \
  LEFT JOIN \
       person.TParentLogin t4 \
  ON \
       t3.mobilephone = t4.userName \
  LEFT JOIN \
       school.TClass d \
  ON \
       t1.classId = d.id \
  WHERE \
       t1.schoolYearId = ? AND t1.schoolId = ? AND t3.`status` = 1

#\u67E5\u8BE2\u5B66\u751F\u4FE1\u606F
sql.school.region.queryStudentByParentIdSql=SELECT a.* FROM person.TStudent a LEFT JOIN person.TParentStudentRelationship b ON a.uid = b.studentId WHERE b.parentId = ? AND a.`status` = 1

#\u67E5\u8BE2\u6559\u5E08\u4EBA\u6570
sql.school.region.getTeacherNumBySchoolIdSql=SELECT COUNT(DISTINCT id) FROM person.TTeacher  WHERE `status` = 1 AND schoolID = ? 

#\u67E5\u8BE2\u6587\u4EF6\u5217\u8868
sql.school.region.queryFileInfoListSql=SELECT t1.*,t2.id as fileInfoReleaseId,t2.status,(SELECT sum(t3.readNum) FROM TFileInfoRelease t3 WHERE t3.preFileInfoReleaseId=t2.id) AS readNum, (SELECT GROUP_CONCAT(t3.receiverRegionName) FROM TFileInfoRelease t3 \
WHERE t3.preFileInfoReleaseId = t2.id ) AS receiverName,(SELECT t3.receiverSchoolTypeNames FROM TFileInfoRelease t3 \
WHERE t3.preFileInfoReleaseId = t2.id AND t3.receiverSchoolTypeNames IS NOT NULL) AS receiverSchoolTypeNames,(SELECT t3.receiverTeacherRoleNames FROM TFileInfoRelease t3 \
WHERE t3.preFileInfoReleaseId = t2.id AND t3.receiverTeacherRoleNames IS NOT NULL) AS receiverTeacherRoleNames,DATE_FORMAT(t1.creationTime,'%Y-%m-%d %H:%i') AS createTime \,0 AS isRelease \
FROM TFileInfo t1 JOIN TFileInfoRelease t2 ON t1.id = t2.fileInfoId WHERE t2.preFileInfoReleaseId = 0 \
AND t2.receiverRegionId = ? AND t2.receiverRegionType = ? \
UNION \
SELECT t1.*,t2.id as fileInfoReleaseId,(CASE WHEN (SELECT COUNT(t3.id) FROM TFileInfoRelease t3 WHERE t3.preFileInfoReleaseId=t2.id AND t3.status=1)>0 THEN 1 ELSE 0 END) AS status,(SELECT sum(t3.readNum) FROM TFileInfoRelease t3 WHERE t3.preFileInfoReleaseId=t2.id) AS readNum, (SELECT GROUP_CONCAT(t3.receiverRegionName) FROM TFileInfoRelease t3 \
WHERE t3.preFileInfoReleaseId = t2.id ) AS receiverName,(SELECT t3.receiverSchoolTypeNames FROM TFileInfoRelease t3 \
WHERE t3.preFileInfoReleaseId = t2.id AND t3.receiverSchoolTypeNames IS NOT NULL) AS receiverSchoolTypeNames,(SELECT t3.receiverTeacherRoleNames FROM TFileInfoRelease t3 \
WHERE t3.preFileInfoReleaseId = t2.id AND t3.receiverTeacherRoleNames IS NOT NULL) AS receiverTeacherRoleNames,DATE_FORMAT(t1.creationTime,'%Y-%m-%d %H:%i') AS createTime,1 AS isRelease \
FROM TFileInfo t1 JOIN TFileInfoRelease t2 ON t1.id = t2.fileInfoId WHERE t2. status = 1 AND t2.preFileInfoReleaseId <> 0 \
AND t2.receiverRegionId = ? AND t2.receiverRegionType = ? GROUP BY t2.fileInfoId

#\u67E5\u8BE2\u5B66\u6821\u7C7B\u578B
sql.school.region.getSchoolTypeSql=SELECT * FROM base.TDictionary WHERE `code`=2

#\u83B7\u53D6\u6240\u6709\u6559\u5E08\u89D2\u8272
sql.school.region.getTeacherRoleSql=SELECT * FROM base.TRole

#\u65B0\u589E\u6587\u4EF6\u4E0A\u4F20\u4FE1\u606F
sql.school.region.saveFileInfoUpload=INSERT INTO TFileInfoUpload(uploadId,fileInfoId,uploadFilePath,fileName) VALUES(?,?,?,?)

#\u67E5\u8BE2\u6587\u4EF6\u4FE1\u606F\u53D1\u5E03
sql.school.region.getFileInfoReleaseByIdSql=SELECT *,DATE_FORMAT(creationTime,'%Y-%m-%d %H:%i:%S') AS createTime,\
  (SELECT COUNT(id) FROM TRegionFileConsult WHERE regionFileId = ? ) AS num  FROM TFileInfoRelease WHERE id = ?

#\u65B0\u589E\u5730\u533A\u5DF2\u9605\u6570\u636E
sql.school.region.saveRegionFileInfoConsultSql=INSERT INTO TRegionFileConsult(fileInfoReleaseId,creator,creatorName,creationTime,regionId,regionType,regionName )  \
SELECT ?,?,?,NOW(),?,?,? FROM dual WHERE NOT EXISTS (SELECT id FROM TRegionFileConsult WHERE fileInfoReleaseId=? AND regionId=? AND regionType=?)

#\u65B0\u589E\u6559\u5E08\u5DF2\u9605\u6570\u636E
sql.school.region.saveTeacherFileInfoConsultSql=INSERT INTO TRegionFileConsult(teacherId,teacherName,teacherRoleId,teacherRole,schoolId,schoolName,fileInfoReleaseId,creator,creatorName,creationTime)  \
SELECT ?,?,?,?,?,?,?,?,?,NOW() FROM dual
#\u9605\u8BFB\u8BB0\u5F55+1
sql.school.region.updateFileReleaseReadNumSql=UPDATE TFileInfoRelease SET readNum=readNum+1 WHERE id=?
#\u67E5\u8BE2\u5DF2\u9605\u8BB0\u5F55
sql.school.region.queryFileInfoConsultSql=SELECT t1.* FROM TRegionFileConsult t1 JOIN TFileInfoRelease t2 ON t1.fileInfoReleaseId=t2.id WHERE t2.preFileInfoReleaseId=?
#\u5220\u9664\u4E0A\u4F20\u6587\u4EF6
sql.school.region.deleteFileUploadSql=DELETE FROM TFileInfoUpload WHERE fileInfoId = ? AND \
   EXISTS(SELECT t1.id FROM TFileInfo t1 JOIN TFileInfoRelease t2 ON t1.id=t2.fileInfoId WHERE t1.regionType=? AND t1.regionId=? AND t1.id=? AND t2.preFileInfoReleaseId=0 AND t2.status=0) 

#\u5220\u9664\u6587\u4EF6\u53D1\u5E03\u4FE1\u606F
sql.school.region.deleteFileInfoReleaseSql=DELETE FROM TFileInfoRelease WHERE fileInfoId=? AND status=0 AND EXISTS(SELECT id FROM TFileInfo WHERE regionType=? AND regionId=? AND id=?) 
#\u4FDD\u5B58\u6587\u4EF6\u4FE1\u606F
sql.school.region.saveFileInfo=INSERT INTO TFileInfo (title,content,departmentName,departmentId,creator,creatorName,creationTime,regionId,regionType) \
  VALUES(?,?,?,?,?,?,NOW(),?,?)
#\u4FDD\u5B58\u6587\u4EF6\u53D1\u5E03\u4FE1\u606F
sql.school.region.saveFileInfoRelease=INSERT INTO TFileInfoRelease(fileInfoId,receiverRegionId,receiverSchoolTypes,receiverTeacherRoles,readNum,status,receiverRegionName,receiverSchoolTypeNames,receiverTeacherRoleNames,receiverRegionType,preFileInfoReleaseId) \
  VALUES(?,?,?,?,0,?,?,?,?,?,?)
#\u66F4\u65B0\u6587\u4EF6\u53D1\u5E03\u4FE1\u606F(\u53D1\u5E03)
sql.school.region.updateFileInfoForReleaseSql=UPDATE TFileInfoRelease SET departmentName=?,departmentId=?,sender=?,senderName=?,sendTime=NOW(),senderRegionType=?,senderRegionId=?,status=1 \
WHERE (id=? OR preFileInfoReleaseId=?) AND status=0 AND EXISTS(SELECT t1.* FROM (SELECT id FROM TFileInfoRelease WHERE receiverRegionId=? AND receiverRegionType=? AND id=?) t1) 

#\u5220\u9664\u6587\u4EF6\u4FE1\u606F
sql.school.region.deleteFileInfoSql=DELETE FROM TFileInfo WHERE id=? AND regionType=? AND regionId=? AND EXISTS (SELECT id FROM TFileInfoRelease WHERE TFileInfoRelease.fileInfoId=TFileInfo.id AND TFileInfoRelease.preFileInfoReleaseId=0 AND TFileInfoRelease.status=0)

#\u67E5\u8BE2\u6587\u4EF6\u53D1\u5E03\u4FE1\u606F
sql.school.region.queryFileInfoReleaseByIdSql=SELECT t1.title,t1.content,(SELECT GROUP_CONCAT(t3.receiverRegionId) FROM TFileInfoRelease t3 \
WHERE t3.preFileInfoReleaseId = t2.id ) AS receiverRegionId,DATE_FORMAT(t1.creationTime,'%Y-%m-%d %H:%i') AS createTime,\
(SELECT t3.receiverSchoolTypes FROM TFileInfoRelease t3 \
WHERE t3.preFileInfoReleaseId = t2.id AND t3.receiverSchoolTypes IS NOT NULL) AS receiverSchoolTypes,\
(SELECT t3.receiverTeacherRoles FROM TFileInfoRelease t3 \
WHERE t3.preFileInfoReleaseId = t2.id AND t3.receiverTeacherRoles IS NOT NULL ) AS receiverTeacherRoles,t2.id AS fileInfoReleaseId \
FROM TFileInfo t1 JOIN TFileInfoRelease t2 ON t1.id = t2.fileInfoId WHERE \
 t2.receiverRegionId = ? AND t2.receiverRegionType = ? \
AND t1.id=? 

#\u67E5\u8BE2\u6587\u4EF6\u4FE1\u606F
sql.school.region.queryFileInfoByIdSql=SELECT t1.title,t1.content,t1.creatorName,DATE_FORMAT(t1.creationTime,'%Y-%m-%d %H:%i') AS creationTime,\
t1.departmentName FROM TFileInfo t1 WHERE t1.id=?

#\u67E5\u8BE2\u4E0A\u4F20\u6587\u4EF6\u4FE1\u606F
sql.school.region.queryFileUploadByFileInoIdSql = SELECT * FROM TFileInfoUpload WHERE fileInfoId=?
#\u4FEE\u6539\u6587\u4EF6\u4FE1\u606F
sql.school.region.updateFileInfoSql=UPDATE TFileInfo SET title=?,content=?,modifier=?,modifierName=?,modificationTime=NOW() WHERE id=? AND \
  EXISTS(SELECT id FROM TFileInfoRelease WHERE TFileInfo.id=TFileInfoRelease.fileInfoId AND status=0)

#\u6839\u636E\u6587\u4EF6\u53D1\u5E03Id\u67E5\u8BE2\u6587\u4EF6\u4FE1\u606F
sql.school.region.queryFileInfoByReleaseIdSql=SELECT t1.*,GROUP_CONCAT(t2.receiverRegionId) as receiverRegionIds,\
  GROUP_CONCAT(t2.receiverSchoolTypes) as receiverSchoolTypes,GROUP_CONCAT(t2.receiverTeacherRoles) as receiverTeacherRoles  FROM TFileInfo t1 join TFileInfoRelease t2 on t1.id=t2.fileInfoId where t2.preFileInfoReleaseId=? group by t1.id
#\u83B7\u53D6\u90E8\u95E8\u4FE1\u606F
sql.school.region.queryDepartmentByRoleIdSql=SELECT * FROM TDepartment WHERE id = ?

#\u6839\u636E\u533A\u53BF\u67E5\u8BE2\u5B66\u6821\u7C7B\u578B
sql.school.region.getSchoolTypeByArea = select t1.dictValue as schoolType,t1.dictionaryName as schoolTypename from base.TDictionary t1 where t1.code=2 and EXISTS (select DISTINCT(t2.type) from school.TSchool t2 where t2.area=? and t1.dictValue=t2.type)

#\u6839\u636E\u5730\u5E02\u67E5\u8BE2\u5B66\u6821\u7C7B\u578B
sql.school.region.getSchoolTypeByCity = select t1.dictValue as schoolType,t1.dictionaryName as schoolTypename from base.TDictionary t1 where t1.code=2 and EXISTS (select DISTINCT(t2.type) from school.TSchool t2 where t2.city=? and t1.dictValue=t2.type)


#\u6839\u636E\u533A\u53BF\u5B66\u6821\u7C7B\u578B\u67E5\u8BE2\u8001\u5E08\u6570\u91CF
sql.school.region.getTeacherNumberByGrade=\
  select t1.gradeName,count(DISTINCT t1.gradeName,t3.teacherId) as teacherNumber,t1.gradeName as typeName from TSubjectTeacherClass t1 join TSchool t2 on t1.schoolID=t2.id join TSubjectTeacher t3 on t3.id=t1.subjectTeacherId join TGrade t4 on t1.gradeId=t4.id where t2.type=?
#\u6839\u636E\u533A\u53BF\u5B66\u6821\u7C7B\u578B\u67E5\u8BE2\u5B66\u751F\u6570\u91CF
sql.school.region.getStudentNumberByGrade=\
  select count(gradeName) as studentNumber,t1.gradeName as typeName from person.TStudent t1 join TSchool t2 on t1.schoolID=t2.id join TGrade t3 on t1.gradeId=t3.id where t2.type=? and t1.status=1

#\u6839\u636E\u533A\u53BF\u5B66\u6821\u7C7B\u578B\u67E5\u8BE2\u6559\u5E08\u603B\u6570\u91CF
sql.school.region.getTotalTeacherNumberBySchoolType=\
  select count(t1.id) as totalTeacherNumber from person.TTeacher t1 join TSchool t2 on t1.schoolID=t2.id where t1.status=1 and t2.type=?

#\u6839\u636E\u533A\u53BF\u5B66\u6821\u7C7B\u578B\u67E5\u8BE2\u5B66\u751F\u603B\u6570\u91CF
sql.school.region.getTotalStudentNumberBySchoolType=select count(t1.uid) as totalStudentNumber from person.TStudent t1 join TSchool t2 on t1.schoolID=t2.id where t1.status=1 and t1.gradeId is not null

#\u67E5\u8BE2\u6559\u5E08\u89D2\u8272
sql.school.region.queryTeacherRoleUrl=SELECT * FROM person.TTeacherRole WHERE teacherID = ?

#\u83B7\u53D6\u4E0B\u53D1\u6587\u4EF6\u4FE1\u606F\uFF08pc\u6559\u5E08\u7AEF\uFF09
sql.school.region.queryRegionFileByTeacherUrl=select t1.id,t1.title,t1.creatorName,t1.departmentName,DATE_FORMAT(t1.creationTime,'%Y-%m-%d %H:%i:%S') as creationTime,\
  t2.id as fileInfoReleaseId  from TFileInfo t1 join TFileInfoRelease t2 on t1.id=t2.fileInfoId \
where FIND_IN_SET(?,t2.receiverSchoolTypes) and t2.senderRegionType=? and t2.senderRegionId=? and t2.status=1


#\u5B66\u671F \u5373\u65F6\u6FC0\u52B1\u5206\u6570\u8BE6\u60C5-\u533A\u57DF\u7AEF
sql.areaFiveEvaluation.getInstantIncentiveBySchoolIdAndTermId = SELECT SUM(a.quotaPoint) as score,a.quotaId,a.quotaName,b.quotaOperType from TInspire a \
  LEFT JOIN TInspireQuota b ON a.quotaId=b.id  where a.schoolID=? and a.termId=? 
#\u5B66\u671F \u5373\u65F6\u6FC0\u52B1\u73ED\u7EA7\u6570\u636E-\u533A\u57DF\u7AEF
sql.areaFiveEvaluation.getInstantIncentiveData = SELECT SUM(a.quotaPoint) as score,a.classId,a.className,a.gradeName,b.quotaOperType from school.TInspire a \
  LEFT JOIN school.TInspireQuota b ON a.quotaId=b.id  where a.schoolID=? and a.termId=? GROUP BY a.classId,b.quotaOperType ORDER BY a.classId


#\u67E5\u8BE2\u79D1\u76EE\u8001\u5E08\u6210\u7EE9\u5217\u8868
sql.school.region.queryTeacherExamListSql=select ROUND(avg(t1.score),1) as score,t2.name from exam.TStudentAchievement t1 \
join school.TTerm t2 on t1.termId=t2.Id \
where t1.teacherId=? and t1.subjectId=? \
group by t1.termId \
order by t2.startDate \ 


#------------------------------------\u5730\u5E02\u7AEF\u5B66\u6821\u7BA1\u7406--------------------------------------------------#
#\u6839\u636E\u5730\u5E02ID\u83B7\u53D6\u6240\u6709\u5B66\u6821
sql.school.city.getSchoolTypeNumberByCityId = SELECT COUNT(type) as number,type,typeName from TSchool where city = ? and status = 1 GROUP BY type

#\u6839\u636E\u5730\u5E02\u548C\u7C7B\u578B\u83B7\u53D6\u5B66\u6821
sql.school.city.getSchoolByCityIdAndTypeId = SELECT *  FROM TSchool  WHERE city = ? AND type = ? and status = 1

#\u6839\u636EID\u83B7\u53D6\u5B66\u6821\u7684\u8BE6\u7EC6\u4FE1\u606F
sql.school.city.getDetailSchoolInfo=SELECT t1.id,t1.`name`,t1.provinceName,t1.cityName,t1.areaName,\
(SELECT COUNT(DISTINCT t2.id) FROM person.TTeacher t2  WHERE t2.`status` = 1 AND t2.schoolID = t1.id ) AS teacherNum,\
(SELECT COUNT(DISTINCT t4.uid) FROM person.TStudent t4 WHERE t1.id=t4.schoolID AND t4.`status` = 1 AND t4.gradeId IS NOT NULL) AS studentNum ,\
(SELECT COUNT(DISTINCT t5.id) FROM TClass t5 WHERE t5.schoolId = t1.id AND t5.`status` = 1  ) AS classNum \
FROM TSchool t1 WHERE t1.id = ?

#\u6839\u636E\u5730\u5E02\u548C\u5B66\u6821\u540D\u83B7\u53D6\u5B66\u6821
sql.school.city.querySchoolByCityIdAndName = SELECT *  FROM TSchool  WHERE city = ? AND status = 1

#\u901A\u8FC7\u5B66\u6821ID\u83B7\u53D6\u8BE5\u6821\u7684\u5B66\u751F\u6570\u91CF
sql.school.city.getStudentNumBySchoolId=SELECT COUNT(DISTINCT uid) FROM person.TStudent WHERE `status`=1 AND schoolID = ? AND gradeId IS NOT NULL

#\u901A\u8FC7\u5B66\u6821ID\u83B7\u53D6\u8BE5\u6821\u7684\u5B66\u751F\u5BB6\u957F\u6570\u91CF
sql.school.city.getParentNumBySchoolId=SELECT COUNT(DISTINCT t1.id) FROM person.TParent t1 LEFT JOIN person.TParentStudentRelationship t2 ON t1.id=t2.parentId \
LEFT JOIN person.TStudent t3 ON t2.studentId=t3.uid   \
WHERE t1.`status` = '1' AND t3.schoolID=?  AND t3.`status`=1 AND t3.gradeId IS NOT NULL

#\u901A\u8FC7\u5B66\u6821ID\u83B7\u53D6\u8BE5\u6821\u7684\u6559\u5E08\u6570\u91CF
sql.school.city.getTeacherNumBySchoolId = SELECT COUNT(DISTINCT id) FROM person.TTeacher  WHERE `status` = 1 AND schoolID = ? 

#\u6839\u636E\u533A\u53BF\u83B7\u53D6\u5B66\u6821
sql.school.city.getSchoolTypeNumberByAreaId = SELECT COUNT(type) as number,type,typeName from TSchool where area = ? GROUP BY type

#\u6839\u636E\u533A\u53BF\u548C\u7C7B\u578B\u83B7\u53D6\u5B66\u6821\u4FE1\u606F
sql.school.city.getSchoolByAreaIdAndTypeId = SELECT *  FROM TSchool  WHERE area = ? AND type = ?

#\u6839\u636EschoolId\u67E5\u8BE2\u6559\u5E08\u4FE1\u606F\u5217\u8868
sql.school.city.queryTeacherListBySchoolId = \
 SELECT \
       t3.*, ROUND(avg(t6.score),1) AS avgScore \
 FROM \
      ( \
       SELECT \
             t1.id,t1.staffNumber,t1.realName,t1.mobilephone,t1.sex,t2.subjectName,t2.subjectId \
       FROM \
             person.TTeacher t1 \
       LEFT JOIN \
             TSubjectTeacher t2 \
       ON \
             t1.id = t2.teacherId \
       WHERE \
             t1.`status` = 1 AND t1.schoolID = ? \
      ) t3 \
 LEFT JOIN \
      ( \
       SELECT \
            t4.score,\
            t4.subjectId,\
            t4.teacherId \
       FROM \
            exam.TStudentAchievement t4 \
       JOIN \
            TTerm t5 \
       ON \
            t4.termId = t5.id \
       WHERE \
            t5.schoolID = ? AND t5. NAME = ? AND t4.`examTypeName` LIKE '%\u671F\u672B%' \
      ) t6 \
 ON \
      t3.id = t6.teacherId AND t3.subjectId = t6.subjectId 


#\u67E5\u8BE2\u79D1\u76EE\u8001\u5E08\u6210\u7EE9\u5217\u8868
sql.school.city.queryTeacherExamList = select ROUND(avg(t1.score),1) as score,t2.name from exam.TStudentAchievement t1 \
join school.TSchoolYear t2 on t1.schoolYearId=t2.Id \
where t1.teacherId=? and t1.subjectId=? \
group by t1.schoolYearId \
order by t2.startDate \ 

#\u5B66\u5E74\u67E5\u8BE2
sql.school.city.querySchoolYearBySchoolId = SELECT * FROM TSchoolYear WHERE id<=(SELECT id FROM TSchoolYear WHERE flag =1)


#\u83B7\u53D6\u5E74\u7EA7\u5217\u8868\uFF08\u5B66\u751F\u4EBA\u6570,\u5BB6\u957F\u4EBA\u6570\uFF09
sql.school.city.queryGradeListBySchoolId=SELECT a.`name`,a.id,(SELECT COUNT(DISTINCT b.uid ) FROM person.TStudent b WHERE a.id=b.gradeId AND b.`status` = 1  ) AS stuNum, \
(SELECT COUNT(DISTINCT t1.id) FROM person.TParent t1 LEFT JOIN person.TParentStudentRelationship t2 ON t1.id = t2.parentId \
LEFT JOIN person.TStudent t3 ON t2.studentId = t3.uid WHERE t1.`status` = '1' AND t3.gradeId = a.id  AND t3.gradeId IS NOT NULL \
AND t3.`status` = 1) AS parentNum FROM TGrade a WHERE schoolId = ?

#\u83B7\u53D6\u65E7\u5E74\u7EA7\u5217\u8868\uFF08\u5B66\u751F\u4EBA\u6570\uFF0C\u5BB6\u957F\u4EBA\u6570\uFF09
sql.school.city.queryOldGradeListBySchoolId= \
SELECT \
      a.`name`, \
      a.id, \
      ( \
       SELECT \
            COUNT( DISTINCT b.id ) \
       FROM \
            TStudentOldData b \
       LEFT JOIN person.TStudent c ON b.studentId = c.uid \
       WHERE \
            a.id = b.gradeId AND b.schoolYearId = ? AND b.schoolId = ? AND c.`status` = 1 \
       ) AS stuNum , \
      ( \
       SELECT \
            COUNT( DISTINCT t1.id ) \
       FROM \
            person.TParent t1 \
       LEFT JOIN person.TParentStudentRelationship t2 ON t1.id = t2.parentId \
       LEFT JOIN school.TStudentOldData t3 ON t2.studentId = t3.studentId \
       WHERE \
            t1.`status` = '1' AND t3.gradeId = a.id AND t3.schoolYearID = ? AND t3.schoolId = ? AND t3.gradeId IS NOT NULL \
\
       ) as parentNum	\
FROM \
     TGrade a \
WHERE \
     a.schoolId = ?


#\u83B7\u53D6\u73ED\u7EA7\u5217\u8868\uFF08\u5B66\u751F\u4EBA\u6570\uFF0C\u5BB6\u957F\u4EBA\u6570\uFF09
sql.school.city.queryClassListBySchoolId=SELECT a.id,a.`name`,(SELECT COUNT(DISTINCT b.uid ) FROM person.TStudent b WHERE a.id=b.classID AND b.`status` = 1 ) AS stuNum, \
(SELECT COUNT(DISTINCT t1.id) FROM person.TParent t1 LEFT JOIN person.TParentStudentRelationship t2 ON t1.id = t2.parentId \
LEFT JOIN person.TStudent t3 ON t2.studentId = t3.uid WHERE t1.`status` = '1' AND t3.classID = a.id \
AND t3.`status` = 1) AS parentNum  FROM TClass a WHERE a.schoolId= ? AND a.gradeId = ? 


#\u83B7\u53D6\u65E7\u73ED\u7EA7\u5217\u8868\uFF08\u5B66\u751F\u4EBA\u6570,\u5BB6\u957F\u4EBA\u6570\uFF09
sql.school.city.queryOldClassListBySchoolId= \
  SELECT \
       a.`name`, \
       a.id, \
       ( \
        SELECT \
              COUNT( DISTINCT b.id ) \
        FROM \
              TStudentOldData b \
        LEFT JOIN person.TStudent c ON b.studentId = c.uid \
        WHERE \
              a.id = b.classId AND b.schoolYearId = ? AND b.schoolId = ? AND c.`status` = 1 \
       ) AS stuNum, \
       ( \
        SELECT \
              COUNT( DISTINCT t1.id ) \
        FROM \
              person.TParent t1 \
        LEFT JOIN person.TParentStudentRelationship t2 ON t1.id = t2.parentId \
        LEFT JOIN school.TStudentOldData t3 ON t2.studentId = t3.studentId \
        WHERE \
              t1.`status` = '1' AND t3.classID = a.id AND t3.schoolYearId = ? AND t3.schoolId = ? \
       ) AS parentNum \
  FROM \
      school.TClass a \
  WHERE \
      a.schoolId = ? AND a.gradeId = ?


#\u67E5\u8BE2\u5B66\u751F\u4FE1\u606F(\u5206\u9875)
sql.school.city.queryStudentListBySchoolId=SELECT DISTINCT a.uid,a.userName,a.studentNumber,a.position,a.schoolName,a.className,a.gradeName,a.sex,a.`status`,b.IDPhotoAddress,a.gradeId,a.classID,DATE_FORMAT(a.admissionTime,'%Y-%m-%d') as admissionTime  \
FROM person.TStudent a LEFT JOIN person.TStudentLogin b ON a.studentNumber = b.userName AND a.schoolID = b.schoolID \
AND b. STATUS = 1 WHERE a.schoolID = ? AND a.`status` = 1 AND a.gradeId IS NOT NULL

#\u67E5\u8BE2\u65E7\u5B66\u751F\u4FE1\u606F(\u5206\u9875)
sql.school.city.queryOldStudentListBySchoolId=SELECT DISTINCT b.uid,b.userName,b.studentNumber,d.gradeName,d.`name` AS className,b.schoolName,b.sex,c.IDPhotoAddress,b.`status`,b.position,d.gradeId,d.id AS classID FROM \
TStudentOldData a LEFT JOIN person.TStudent b ON a.studentId = b.uid  \
LEFT JOIN person.TStudentLogin c ON b.studentNumber = c.userName AND b.schoolID = c.schoolID  \
LEFT JOIN TClass d ON a.classId = d.id  WHERE a.schoolYearId = ? AND a.schoolId = ? AND b.`status` = 1 

#\u67E5\u8BE2\u5BB6\u957F\u4FE1\u606FgetB
sql.school.city.queryParentByStuId=SELECT  a.*  FROM person.TParent a LEFT JOIN person.TParentStudentRelationship b ON a.id=b.parentId WHERE b.studentId = ? AND a.`status` = 1

#\u6839\u636E\u533A\u53BFID\u67E5\u8BE2\u5B66\u6821\u5217\u8868
sql.school.region.getSchoolListByArea=select id,name,type from TSchool where area=?

#\u67E5\u8BE2\u5BB6\u957F\u4FE1\u606F(\u5206\u9875)
sql.school.city.queryParentListBySchoolId=SELECT DISTINCT t1.*,t4.IDPhotoAddress FROM \
person.TParent t1 LEFT JOIN person.TParentStudentRelationship t2 ON t1.id = t2.parentId \
LEFT JOIN person.TStudent t3 ON t2.studentId = t3.uid LEFT JOIN person.TParentLogin t4 ON t1.mobilephone = t4.userName  \
WHERE t1.`status` = '1' AND t3.schoolID=?  AND t3.`status` = '1' AND t3.gradeId IS NOT NULL


#\u67E5\u8BE2\u65E7\u5BB6\u957F\u4FE1\u606F(\u5206\u9875)
sql.school.city.queryOldParentListBySchoolId=\
  SELECT \
       DISTINCT t3.*,t4.IDPhotoAddress \
  FROM \
       school.TStudentOldData t1 \
  LEFT JOIN \
       person.TParentStudentRelationship t2 \
  ON \
       t1.studentId = t2.studentId \
  LEFT JOIN \
       person.TParent t3 \
  ON \
       t2.parentId = t3.id \
  LEFT JOIN \
       person.TParentLogin t4 \
  ON \
       t3.mobilephone = t4.userName \
  LEFT JOIN \
       school.TClass d \
  ON \
       t1.classId = d.id \
  WHERE \
       t1.schoolYearId = ? AND t1.schoolId = ? AND t3.`status` = 1


#\u67E5\u8BE2\u5B66\u751F\u4FE1\u606F
sql.school.city.queryStudentByParentId=SELECT a.* FROM person.TStudent a LEFT JOIN person.TParentStudentRelationship b ON a.uid = b.studentId WHERE b.parentId = ? AND a.`status` = 1



#///////////////////////////////////////////
#---------------------sql---- END-----------------------
#---------------------\u533A\u53BF\u7AEFsql---- END-----------------------

#\u67E5\u8BE2\u5730\u5E02\u6240\u6709\u533A\u53BF\u7684\u6559\u5E08\u4EBA\u6570
sql.school.region.getAreaTeacherNumberByCity = SELECT t.* FROM(SELECT COUNT(a.id) as teacherNumber,b.areaName as typeName from person.TTeacher as a \
   JOIN TSchool as b ON a.schoolID=b.id where  a.status=1 and b.city=? and b.areaRelationShip=0 GROUP BY b.area ORDER BY b.area) t \
  union \
SELECT COUNT(a.id) as teacherNumber,'\u76F4\u5C5E\u6821' as typeName from person.TTeacher as a \
   JOIN TSchool as b ON a.schoolID=b.id where  a.status=1 and b.city=? and b.areaRelationShip=1

#\u67E5\u8BE2\u5730\u5E02\u6240\u6709\u533A\u53BF\u7684\u5B66\u751F\u4EBA\u6570
sql.school.region.getAreaStudentNumberByCity=SELECT t.* FROM(SELECT COUNT(a.uid) as studentNumber,b.areaName as typeName from person.TStudent as a \
   JOIN TSchool as b ON a.schoolID=b.id where  a.status=1 and a.gradeId is not null and b.city=? and b.areaRelationShip=0 GROUP BY b.area ORDER BY b.area) t \
  union \
SELECT COUNT(a.uid) as studentNumber,'\u76F4\u5C5E\u6821' as typeName from person.TStudent as a \
   JOIN TSchool as b ON a.schoolID=b.id where  a.status=1 and a.gradeId is not null and b.city=? and b.areaRelationShip=1

#\u67E5\u8BE2\u5730\u5E02\u6240\u6709\u533A\u53BF\u7684\u5B66\u6821\u6570
sql.school.region.getAreaSchoolNumberByCity=SELECT t.* FROM(SELECT COUNT(id) as schoolNumber,areaName as typeName  \
  FROM  TSchool where status=1 and city=? and  areaRelationShip=0 GROUP BY area ORDER BY area) t \
  union \
SELECT COUNT(id) as schoolNumber,'\u76F4\u5C5E\u6821' as typeName from \
    TSchool  where  status=1  and city=? and areaRelationShip=1

#\u6839\u636E\u5B66\u6821\u7C7B\u578B\u5206\u7EC4\u67E5\u8BE2\u8001\u5E08\u6570\u91CF
sql.school.region.getSchoolTypeTeacherNumberByArea=SELECT COUNT(t1.id) as teacherNumber,t2.typeName FROM person.TTeacher t1 JOIN TSchool t2 ON t1.schoolId=t2.id \
WHERE t1.status=1

#\u6839\u636E\u5B66\u6821\u7C7B\u578B\u5206\u7EC4\u67E5\u8BE2\u5B66\u751F\u6570\u91CF
sql.school.region.getSchoolTypeStudentNumberByArea=SELECT COUNT(t1.uid) as studentNumber,t2.typeName FROM person.TStudent t1 JOIN TSchool t2 ON t1.schoolId=t2.id \
WHERE t1.status=1 and t1.gradeId is not null

#\u6839\u636E\u5B66\u6821\u7C7B\u578B\u5206\u7EC4\u67E5\u8BE2\u5B66\u6821\u6570\u91CF
sql.school.region.getSchoolTypeSchoolNumberByArea=SELECT COUNT(id) as schoolNumber,typeName FROM TSchool WHERE status=1

#\u6839\u636E\u5730\u5E02\u5B66\u6821\u7C7B\u578B\u67E5\u8BE2\u5B66\u751F\u603B\u6570\u91CF
sql.school.region.getCityTotalStudentNumberBySchoolType=select count(t1.uid) as totalStudentNumber from person.TStudent t1 join TSchool t2 on t1.schoolID=t2.id where t1.status=1 and t1.gradeId is not null and t2.city=?

#\u6839\u636Eid\u67E5\u8BE2\u5B66\u6821\u4FE1\u606F
sql.school.getSchoolById = select * from TSchool where id=?


#\u6839\u636Eid\u67E5\u8BE2\u5B66\u6821\u4FE1\u606F
sql.school.getSchoolByIdMobile = select * from TSchool where id=?


#\u901A\u8FC7\u5B66\u6821ID\u67E5\u5B66\u5206\u5236\u8FD8\u662F\u603B\u5206\u5236\u72B6\u6001
sql.school.gradeClass.getCreditStatusBySchoolId = select status from TCreditStatus where schoolId = ?

#\u901A\u8FC7\u5B66\u6821ID\u67E5\u5B66\u5206\u5236\u8FD8\u662F\u603B\u5206\u5236\u72B6\u6001
sql.school.subject.updateCreditStatus = update TCreditStatus set status = ?,modifier = ?,modifierName = ?,modificationTime = NOW() where schoolId = ?

#\u5220\u9664\u9AD8\u4E2D\u5E74\u7EA7\u79D1\u76EE\uFF08\u4F2A\u5220\u9664\uFF09
sql.school.subject.deleteSubject = update TGradeSubject set status = 0 where schoolId = ? and (gradeName = '\u9AD8\u4E00' or gradeName = '\u9AD8\u4E8C' or gradeName = '\u9AD8\u4E09')

#\u6839\u636EloginId\u67E5\u8BE2\u6559\u5E08\u4FE1\u606F
sql.school.teacher.queryTeacherByLoginId = select t1.* from TTeacher t1 where exists(select t2.id from TTeacherLogin t2 where t1.id=t2.teacherId and t2.id=?)

#\u4FEE\u6539\u6559\u5E08\u72B6\u6001
sql.school.teacher.updateTeacherStatus = update TTeacher set status=? where id=?

#\u6839\u636E\u5B66\u751F\u5B66\u53F7\u67E5\u8BE2\u5B66\u6821\u5217\u8868
sql.school.getSchoolIdByStudentNumber = select schoolID,schoolName from TStudent where studentNumber = ? GROUP BY schoolID


# -------------------------------------------------------------------------  App  ----------------------------------------------------

#\u6839\u636E\u79D1\u76EE\u8001\u5E08\u6559\u5E08id\u83B7\u53D6\u79D1\u76EE\u8001\u5E08\u7684\u79D1\u76EE
sql.school.getSubjectTeacherSubjectByTeacherId = SELECT \
  sub.subjectId,sub.subjectName,sub.teacherId,sub.teacherName,\
  tea.id,tea.schoolName,tea.realName \
  FROM school.TSubjectTeacher sub \
  LEFT JOIN person.TTeacher tea ON sub.teacherId = tea.id \
  WHERE tea.id = ?


# ------------------------------------------------------------------------------------------------------------------------

#\u83B7\u53D6\u6559\u5E08\u8363\u8A89\u6570\u636E
sql.teacherEvaluate.teacherHonor.getTeacherHonor = select id,teacher_id,teacher_name,honor_name,honor_level,selection_unit,cert_img, \
  DATE_FORMAT(get_date,'%Y-%m-%d') get_date from t_teacher_honor

#\u81EA\u52A8\u8865\u5168\u6559\u5E08\u59D3\u540D
sql.teacherEvaluate.teacherHonor.autocompleteTeacherName = select id,schoolID,schoolName,realName from TTeacher \
  where status = ? and schoolID = ? 

#\u6839\u636E\u6761\u4EF6\u67E5\u8BE2\u6559\u5E08\u8363\u8A89\u6570\u636E
sql.teacherEvaluate.teacherHonor.queryTeacherHonor = select * from t_teacher_honor \
  where teacher_id = ? and teacher_name = ? and honor_name = ? and honor_level = ? \
  and selection_unit = ? and cert_img = ? and get_date = ? and school_id = ?

#\u65B0\u589E\u6559\u5E08\u8363\u8A89\u6570\u636E
sql.teacherEvaluate.teacherHonor.addTeacherHonor = INSERT t_teacher_honor \
  (teacher_id,teacher_name,honor_name,honor_level,selection_unit,cert_img,get_date,school_id) VALUES \
  (?,?,?,?,?,?,?,?)

#\u4FEE\u6539\u6559\u5E08\u8363\u8A89\u6570\u636E
sql.teacherEvaluate.teacherHonor.updateTeacherHonor = UPDATE t_teacher_honor SET teacher_id=?,teacher_name=?,honor_name=?, \
honor_level=?,selection_unit=?,cert_img=?,get_date=?,school_id=? \
WHERE id = ?

#\u5220\u9664\u6559\u5E08\u8363\u8A89\u6570\u636E
sql.teacherEvaluate.teacherHonor.deleteTeacherHonorById = DELETE FROM t_teacher_honor WHERE id = ?


#\u83B7\u53D6\u6559\u5E08\u6280\u80FD\u5927\u8D5B\u6570\u636E
sql.teacherEvaluate.teacherSkillsCompetition.getTeacherSkillsCompetition = select id,teacher_id,teacher_name,match_name,prize,\
  match_level,selection_unit,prize_img, \
  DATE_FORMAT(get_date,'%Y-%m-%d') get_date from t_teacher_match

#\u6839\u636E\u6761\u4EF6\u67E5\u8BE2\u6559\u5E08\u6280\u80FD\u5927\u8D5B\u6570\u636E
sql.teacherEvaluate.teacherSkillsCompetition.getTeacherSkillsMatch = select * from t_teacher_match \
  where teacher_id = ? and teacher_name = ? and match_name = ? and prize = ? and match_level = ? \
  and selection_unit = ? and prize_img = ? and get_date = ? and school_id = ?

#\u65B0\u589E\u6559\u5E08\u6280\u80FD\u5927\u8D5B\u6570\u636E
sql.teacherEvaluate.teacherSkillsCompetition.addTeacherSkillsMatch = INSERT t_teacher_match \
  (teacher_id,teacher_name,match_name,prize,match_level,selection_unit,prize_img,get_date,school_id) VALUES \
  (?,?,?,?,?,?,?,?,?)

#\u4FEE\u6539\u6559\u5E08\u6280\u80FD\u5927\u8D5B\u6570\u636E
sql.teacherEvaluate.teacherSkillsCompetition.updateTeacherSkillsMatch = UPDATE t_teacher_match \
  SET teacher_id=?,teacher_name=?,match_name=?,prize=?, \
      match_level=?,selection_unit=?,prize_img=?,get_date=?,school_id=? \
  WHERE id = ?

#\u5220\u9664\u6559\u5E08\u6280\u80FD\u5927\u8D5B\u6570\u636E
sql.teacherEvaluate.teacherSkillsCompetition.deleteTeacherSkillsMatchById = DELETE FROM t_teacher_match WHERE id = ?


#\u83B7\u53D6\u5E74\u7EA7\u5217\u8868
sql.teacherEvaluate.teacherStudentPrize.getGradeListBySchoolId = select * from TGrade where schoolId = ? and status = 1 \
  order by id 

#\u83B7\u53D6\u73ED\u7EA7\u5217\u8868
sql.teacherEvaluate.teacherStudentPrize.getClassListByGradeId = select * from TClass where schoolId = ? \
  and gradeId = ? and status = 1 \
  order by id 

#\u83B7\u53D6\u6307\u5BFC\u5B66\u751F\u83B7\u5956\u60C5\u51B5\u6570\u636E
sql.teacherEvaluate.teacherStudentPrize.getStudentPrizeList = SELECT \
  id,teacher_id,teacher_name,student_id,student_name,grade_id,class_id,\
  grade_name,class_name,prize,prize_level,selection_unit,\
  DATE_FORMAT(get_date,'%Y-%m-%d') get_date,prize_img \
  FROM t_teacher_student_prize WHERE TRUE 

#\u81EA\u52A8\u8865\u5168\u5B66\u751F\u59D3\u540D
sql.teacherEvaluate.teacherStudentPrize.autocompleteStudentName = select uid,userName,schoolID,schoolName from TStudent \
  where status = ? and schoolID = ? 

#\u6839\u636E\u6761\u4EF6\u67E5\u8BE2\u5B66\u751F\u83B7\u5956\u60C5\u51B5\u6570\u636E
sql.teacherEvaluate.teacherStudentPrize.queryTeacherStudentPrize = select * from t_teacher_student_prize \
  where teacher_id = ? and teacher_name = ? and student_id = ? and student_name = ? and grade_id = ? and class_id = ? \
  and grade_name = ? and class_name = ? and prize = ? and prize_level = ? \
  and selection_unit = ? and get_date = ? and prize_img = ? and school_id = ?

#\u65B0\u589E\u5B66\u751F\u83B7\u5956\u60C5\u51B5\u6570\u636E
sql.teacherEvaluate.teacherStudentPrize.addTeacherStudentPrize = INSERT t_teacher_student_prize \
  (teacher_id,teacher_name,student_id,student_name,grade_id,class_id,grade_name,class_name,prize,prize_level,selection_unit,get_date,prize_img,school_id) VALUES \
  (?,?,?,?,?,?,?,?,?,?,?,?,?,?)

#\u4FEE\u6539\u5B66\u751F\u83B7\u5956\u60C5\u51B5\u6570\u636E
sql.teacherEvaluate.teacherStudentPrize.updateTeacherStudentPrize = UPDATE t_teacher_student_prize \
  SET teacher_id=?,teacher_name=?,student_id=?,student_name=?,grade_id=?,class_id=?,grade_name=?,class_name=?,\
  prize=?,prize_level=?,selection_unit=?,get_date=?,prize_img=?,school_id=? \
  WHERE id = ?

#\u5220\u9664\u5B66\u751F\u83B7\u5956\u60C5\u51B5\u6570\u636E
sql.teacherEvaluate.teacherStudentPrize.deleteTeacherStudentPrizeById = DELETE FROM t_teacher_student_prize WHERE id = ?


#\u83B7\u53D6\u6559\u5E08\u53D1\u8868\u8BBA\u6587\u60C5\u51B5\u6570\u636E
sql.teacherEvaluate.teacherPublishPaper.getTeacherPublishPaperList = SELECT * \
  FROM t_teacher_paper WHERE TRUE 

#\u6839\u636E\u6761\u4EF6\u67E5\u8BE2\u6559\u5E08\u53D1\u8868\u8BBA\u6587\u60C5\u51B5\u6570\u636E
sql.teacherEvaluate.teacherPublishPaper.queryTeacherPublishPaper = select * from t_teacher_paper \
  where teacher_id = ? and teacher_name = ? and title = ? and abstract_word = ? \
  and key_word = ? and year = ? and publishing_unit = ? and periodical_level = ? \
  and attachment_path = ? and school_id = ?

#\u65B0\u589E\u6559\u5E08\u53D1\u8868\u8BBA\u6587\u60C5\u51B5\u6570\u636E
sql.teacherEvaluate.teacherPublishPaper.addTeacherPublishPaper = INSERT t_teacher_paper \
  (teacher_id,teacher_name,title,abstract_word,key_word,year,publishing_unit,periodical_level,attachment_path,attachment_name,school_id) VALUES \
  (?,?,?,?,?,?,?,?,?,?,?)

#\u4FEE\u6539\u6559\u5E08\u53D1\u8868\u8BBA\u6587\u60C5\u51B5\u6570\u636E
sql.teacherEvaluate.teacherPublishPaper.updateTeacherPaper = UPDATE t_teacher_paper \
  SET teacher_id=?,teacher_name=?,title=?,abstract_word=?,key_word=?,year=?,publishing_unit=?, \
  periodical_level=?,attachment_path=?,attachment_name=?,school_id=? \
  WHERE id = ?

#\u5220\u9664\u6559\u5E08\u53D1\u8868\u8BBA\u6587\u60C5\u51B5\u6570\u636E
sql.teacherEvaluate.teacherPublishPaper.deleteTeacherPaperById = DELETE FROM t_teacher_paper WHERE id = ?



#\u67E5\u8BE2\u6559\u5E08\u5217\u8868
sql.teacherEvaluate.queryTeacherList = select id,schoolID,schoolName,realName from TTeacher \
  where status = ? and schoolID = ? 

#\u67E5\u8BE2\u5B66\u751F\u5217\u8868
sql.teacherEvaluate.queryStudentList = select uid,userName,schoolID,schoolName from TStudent \
  where status = ? and schoolID = ? 


#\u6839\u636E\u5B66\u6821\u540D\u79F0\u83B7\u5F97\u5B66\u6821id
sql.school.getVersionIdBySchoolId = select * from TSchool where id = ?


##2020APP\u6559\u5E08\u8003\u52E4
##\u67E5\u8BE2\u8003\u52E4\u8BB0\u5F55
##\u83B7\u53D6\u5B66\u6821\u8003\u52E4\u6807\u51C6\u6570\u636E
sql.school.teacherAttendance.getSchoolInfo = \
  select * from t_teacher_attendance_info a where a.school_id = ? 
##\u6839\u636E\u7528\u6237id\u67E5\u8BE2\u5F53\u5929\u6253\u5361\u8BB0\u5F55
sql.school.teacherAttendance.getTeacherAttendanceRecordByUserId = \
 select \
  id,attendance_date,attendance_type,school_id,teacher_id,teacher_name,\
  clock_in,DATE_FORMAT( clock_in, '%H:%i:%S') AS clock_inStr,\
  clock_in_status,clock_in_remark,coordinate,address \
from t_teacher_attendance a where a.school_id = ? and a.teacher_id = ? and DATE_FORMAT( a.attendance_date, '%Y%m%d' ) = DATE_FORMAT( CURDATE(),'%Y%m%d') order by a.clock_in 
##\u6559\u5E08\u8003\u52E4\u6253\u5361
sql.school.teacherAttendance.insertTeacherAttendanceRecord = \
  INSERT INTO t_teacher_attendance \
(attendance_date,attendance_type,school_id,teacher_id,teacher_name,clock_in,clock_in_status,clock_in_remark,coordinate,address) \
VALUES (DATE_FORMAT( ?, '%Y-%m-%d') ,?,?,?,?,DATE_FORMAT(?, '%Y-%m-%d %H:%i:%S'),?,?,?,?)
##\u6839\u636E\u7528\u6237id\u67E5\u8BE2\u6307\u5B9A\u65E5\u671F\u6253\u5361\u8BB0\u5F55
sql.school.teacherAttendance.getTeacherAttendanceRecordByUserIdDate = \
 select \
  id,attendance_date,attendance_type,school_id,teacher_id,teacher_name,\
  clock_in,DATE_FORMAT( clock_in, '%H:%i:%S') AS clock_inStr,\
  clock_in_status,clock_in_remark,coordinate,address \
from t_teacher_attendance a where a.school_id = ? and a.teacher_id = ? and DATE_FORMAT( a.attendance_date, '%Y%m%d' ) = DATE_FORMAT( ?,'%Y%m%d') order by a.clock_in 
##\u65B0\u589E\u6559\u5E08\u8BF7\u5047\u8BB0\u5F55
sql.school.teacherAttendance.insertTeacherLeaveRecord = \
INSERT INTO t_teacher_leave \
  (school_id,teacher_id,teacher_name,leave_type,begin_time,end_time,remark,status,apply_time) \
  VALUES (?,?,?,?,DATE_FORMAT( ?, '%Y-%m-%d %H:%i:%S'),DATE_FORMAT( ?, '%Y-%m-%d %H:%i:%S'),?,?,NOW()) 

##\u6839\u636E\u7528\u6237id\u67E5\u8BE2\u6307\u5B9A\u65E5\u671F\u6253\u5361\u8BB0\u5F55
sql.school.teacherAttendance.getTeacherLeaveRecordByUserIdDate = \
select \
  id,school_id,teacher_id,teacher_name,leave_type,\
  begin_time,DATE_FORMAT( begin_time, '%Y-%m-%d %H:%i:%S') AS beginTimeStr,\
  end_time,DATE_FORMAT( end_time, '%Y-%m-%d %H:%i:%S') AS endTimeStr,\
  apply_time,DATE_FORMAT( apply_time, '%Y-%m-%d %H:%i:%S') AS applyTimeStr, \
  remark,auditor,audit_time,status,audit_remark \
from t_teacher_leave a where a.school_id = ? and a.teacher_id = ? \
  and DATE_FORMAT( a.begin_time, '%Y-%m-%d' ) >= DATE_FORMAT( ?,'%Y-%m-%d')  \
  and DATE_FORMAT( a.begin_time, '%Y-%m-%d' ) <= DATE_FORMAT( ?,'%Y-%m-%d') \
  order by a.begin_time 

##web\u7AEF\u6559\u5E08\u8003\u52E4\u7EDF\u8BA1\u3001\u5BA1\u6279
##\u6839\u636E\u6761\u4EF6\u67E5\u8BE2\u6253\u5361\u8868
sql.school.teacherAttendance.getTeacherAttendanceRecordBySchoolId = select \
  id,attendance_date,attendance_type,school_id,teacher_id,teacher_name,\
  clock_in,DATE_FORMAT( clock_in, '%Y-%m-%d %H:%i:%S') AS clock_inStr,\
  clock_in_status,clock_in_remark,coordinate,address \
  from t_teacher_attendance a  where a.school_id = ? 
##\u6839\u636E\u6761\u4EF6\u67E5\u8BE2\u8BF7\u5047\u8BB0\u5F55
sql.school.teacherAttendance.getTeacherLeaveRecordBySchoolId = select \
id,school_id,teacher_id,teacher_name,leave_type, \
begin_time,DATE_FORMAT( begin_time, '%Y-%m-%d %H:%i:%S') AS beginTimeStr, \
  end_time,DATE_FORMAT( end_time, '%Y-%m-%d %H:%i:%S') AS endTimeStr, \
  apply_time,DATE_FORMAT( apply_time, '%Y-%m-%d %H:%i:%S') AS applyTimeStr, \
remark,auditor,audit_time,status,audit_remark \
from t_teacher_leave a  \
where a.school_id = ? 

##\u5BA1\u6279\u8BF7\u5047\u8BB0\u5F55
sql.school.teacherAttendance.updateTeacherLeaveRecordStatus = \
UPDATE t_teacher_leave a SET a.auditor = ?,a.status = ? ,a.audit_remark = ? ,a.audit_time = CURRENT_TIME() WHERE a.id = ? 